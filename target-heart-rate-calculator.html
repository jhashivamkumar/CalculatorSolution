<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <title>Target Heart Rate Calculator (Zones + Karvonen) | CalculatorSolution</title>
  <meta name="description" content="Free Target Heart Rate Calculator: enter age and resting heart rate to calculate training zones (fat burn, cardio, peak) using Max HR and Karvonen (HRR) method.">

  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://calculatorsolution.com/target-heart-rate-calculator.html">

  <meta property="og:title" content="Target Heart Rate Calculator">
  <meta property="og:description" content="Calculate training heart rate zones using Max HR and Karvonen (Heart Rate Reserve) method.">
  <meta property="og:image" content="https://calculatorsolution.com/assets/og-image.svg">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://calculatorsolution.com/assets/og-image.svg">

  <link rel="icon" href="/assets/og-image.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/assets/logo.png">
  <link rel="manifest" href="/assets/site.webmanifest">

  <!-- Global CSS -->
  <link rel="preload" href="/assets/style.css" as="style" onload="this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="/assets/style.css"></noscript>

  <!-- Premium critical CSS (RESPONSIVE + UI/UX polish only; logic unchanged) -->
  <style>
    html,body{height:100%;margin:0}
    body{
      font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial;
      background:radial-gradient(1200px 700px at 10% 10%, rgba(59,130,246,.14), transparent 60%),
                 radial-gradient(900px 600px at 90% 20%, rgba(168,85,247,.14), transparent 55%),
                 linear-gradient(135deg,#f8fafc,#f1f5f9);
      color:#0f172a; line-height:1.6; min-height:100vh;
      -webkit-text-size-adjust:100%;
      text-rendering:optimizeLegibility;
    }
    *{box-sizing:border-box}
    img{max-width:100%;height:auto}
    a{color:inherit}
    :focus-visible{outline:3px solid rgba(59,130,246,.55); outline-offset:3px}

    /* Layout */
    .wrap{max-width:1100px;margin:0 auto;padding:0 18px}
    main.wrap{padding-bottom:26px}

    /* Header */
    .site-header{
      padding:14px 0;border-bottom:1px solid #e2e8f0;
      background:rgba(255,255,255,.65);backdrop-filter:blur(10px);
      position:sticky;top:0;z-index:10
    }
    .brand{display:flex;align-items:center;gap:10px;text-decoration:none}
    .brand-text{font-weight:900;color:#2563eb;font-size:1.15rem;letter-spacing:-.01em}
    .brand-logo{border-radius:10px;flex:0 0 auto}

    /* Hero */
    .hero{
      margin:18px 0 14px 0;border-radius:18px;padding:26px 18px;
      color:#fff;background:linear-gradient(135deg,#2563eb,#a855f7);
      box-shadow:0 18px 50px rgba(2,6,23,.15);
      position:relative;overflow:hidden;
    }
    .hero:before{
      content:""; position:absolute; inset:-60px -60px auto auto;
      width:240px;height:240px;border-radius:999px;
      background:rgba(255,255,255,.16);
      transform:rotate(10deg);
    }
    .hero h1{margin:0 0 6px 0;font-size:1.85rem;letter-spacing:-.02em}
    .hero p{margin:0;opacity:.95;max-width:68ch}
    .chips{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .chip{
      display:inline-flex;align-items:center;gap:8px;
      padding:7px 10px;border-radius:999px;
      background:rgba(255,255,255,.14);
      border:1px solid rgba(255,255,255,.18);
      font-weight:800;font-size:.88rem;
      white-space:nowrap;
    }

    /* Calculator shell */
    .calc-shell{
      display:grid;grid-template-columns:1.1fr .9fr;
      gap:14px;align-items:start;margin-top:14px
    }

    .panel{
      background:rgba(255,255,255,.92);
      border:1px solid #e2e8f0;border-radius:16px;
      box-shadow:0 14px 40px rgba(8,13,26,.06);
      padding:14px;
      overflow:hidden; /* prevents any child overflow on small screens */
    }
    .panel-title{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:10px}
    .panel-title h2{margin:0;font-size:1.05rem}
    .pill{
      display:inline-flex;gap:8px;align-items:center;padding:6px 10px;
      border-radius:999px;background:rgba(37,99,235,.10);
      color:#1d4ed8;font-weight:900;font-size:.85rem;white-space:nowrap
    }

    /* Inputs */
    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .field{display:flex;flex-direction:column;gap:6px;min-width:0}
    .field label{font-weight:900;font-size:.92rem}
    .input{
      width:100%;
      padding:10px 12px;border:1px solid #e2e8f0;border-radius:12px;
      font-size:1rem;background:#fff;outline:none;
      min-height:44px; /* touch target */
    }
    select.input{appearance:none}
    .input:focus{border-color:#93c5fd;box-shadow:0 0 0 4px rgba(59,130,246,.12)}
    .help{margin:0;font-size:.86rem;color:#64748b}

    /* Buttons */
    .actions{
      display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;
      align-items:stretch;
    }
    .btn{
      display:inline-flex;align-items:center;justify-content:center;
      padding:10px 14px;border-radius:12px;
      font-weight:900;border:0;cursor:pointer;
      background:linear-gradient(90deg,#2563eb,#60a5fa);
      color:#fff; box-shadow:0 12px 26px rgba(37,99,235,.18);
      transition:transform .2s, box-shadow .2s;
      min-height:44px; /* touch target */
      user-select:none;
      -webkit-tap-highlight-color:transparent;
    }
    .btn:hover{transform:translateY(-2px);box-shadow:0 16px 34px rgba(37,99,235,.22)}
    .btn:active{transform:translateY(0)}
    .btn-ghost{background:#fff;color:#0f172a;border:1px solid #e2e8f0;box-shadow:none}
    .btn-dark{background:#0f172a;box-shadow:0 14px 30px rgba(2,6,23,.18)}

    /* Sticky output */
    .sticky{position:sticky;top:82px}

    /* Metrics */
    .metric{
      border:1px solid #e2e8f0;border-radius:16px;padding:12px;
      background:linear-gradient(180deg, rgba(37,99,235,.10), rgba(255,255,255,.92));
      margin-bottom:10px;
    }
    .metric.alt{
      background:linear-gradient(180deg, rgba(168,85,247,.10), rgba(255,255,255,.92));
    }
    .metric .k{margin:0;color:#475569;font-size:.86rem;font-weight:800}
    .metric .v{margin:4px 0 0;font-size:1.55rem;font-weight:1000;letter-spacing:-.02em}
    .mini{font-size:.86rem;color:#64748b}

    .bar{
      height:10px;border-radius:999px;background:#e2e8f0;overflow:hidden;margin-top:10px
    }
    .bar > span{display:block;height:100%;width:0%}

    /* Table */
    .table-wrap{
      overflow:auto;
      -webkit-overflow-scrolling:touch;
      border:1px solid #e2e8f0;border-radius:16px;background:#fff;
      box-shadow:0 12px 26px rgba(8,13,26,.05);
    }
    table{width:100%;border-collapse:collapse;min-width:860px}
    th,td{padding:10px 12px;border-bottom:1px solid #e2e8f0;text-align:left;font-size:.95rem;vertical-align:top}
    th{background:#f8fafc;font-weight:1000;position:sticky;top:0;z-index:1}
    tr:last-child td{border-bottom:0}

    /* Notes & content blocks */
    .note{
      border:1px dashed #cbd5e1;border-radius:14px;padding:12px;
      background:rgba(255,255,255,.7);
      margin-top:10px
    }

    /* FAQ / Cards */
    .card{background:#fff;border:1px solid #e2e8f0;border-radius:14px;box-shadow:0 10px 24px rgba(8,13,26,.05);padding:12px}
    details.card{padding:0}
    details.card summary{cursor:pointer;padding:12px;list-style:none}
    details.card summary::-webkit-details-marker{display:none}
    details.card summary:focus-visible{border-radius:14px}
    details.card p{padding:0 12px 12px;margin:0;color:#334155}

    /* Related cards grid (you already have classes; this ensures responsiveness even if global css is missing) */
    .cards-grid{
      display:grid;
      grid-template-columns:repeat(4, minmax(0, 1fr));
      gap:12px;
    }
    .cards-grid a.card h4{margin:0 0 6px}
    .cards-grid a.card p{margin:0;color:#475569}

    /* Typography spacing */
    h2,h3{letter-spacing:-.01em}
    pre{
      overflow:auto;
      -webkit-overflow-scrolling:touch;
      background:rgba(255,255,255,.7);
      border:1px solid #e2e8f0;
      border-radius:14px;
      padding:12px;
      max-width:100%;
      white-space:pre;
    }
    ul{padding-left:18px}

    /* Footer links wrap nicely */
    .site-footer a{white-space:nowrap}

    /* Responsive breakpoints */
    @media (max-width: 1024px){
      .wrap{padding:0 16px}
      .hero{padding:22px 16px}
      .hero h1{font-size:1.7rem}
      .metric .v{font-size:1.4rem}
      table{min-width:760px}
    }

    @media (max-width: 920px){
      .calc-shell{grid-template-columns:1fr}
      .sticky{position:static}
      table{min-width:680px}
      .cards-grid{grid-template-columns:repeat(2, minmax(0, 1fr))}
    }

    @media (max-width: 640px){
      .hero{margin:14px 0 12px 0;border-radius:16px}
      .hero h1{font-size:1.45rem}
      .hero p{font-size:.98rem}
      .grid-2{grid-template-columns:1fr}
      .actions{gap:10px}
      .btn{flex:1 1 100%}
      .panel{padding:12px;border-radius:14px}
      .metric{border-radius:14px}
      table{min-width:620px} /* keep horizontal scroll usable */
      th,td{padding:10px}
      .cards-grid{grid-template-columns:1fr}
      .chip{font-size:.85rem}
    }

    @media (prefers-reduced-motion: reduce){
      *{scroll-behavior:auto !important}
      .btn,.card{transition:none !important}
      .btn:hover{transform:none}
    }
  </style>

  <!-- GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-Y5YHCPQPFS"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments)}
    gtag('js', new Date());
    gtag('config', 'G-Y5YHCPQPFS');
  </script>

  <!-- Schema: WebPage + Breadcrumb + FAQ + HowTo -->
  <script type="application/ld+json">[
    {
      "@context":"https://schema.org",
      "@type":"WebPage",
      "name":"Target Heart Rate Calculator",
      "url":"https://calculatorsolution.com/target-heart-rate-calculator.html",
      "description":"Calculate target heart rate zones using Max HR and Karvonen (HRR) method."
    },
    {
      "@context":"https://schema.org",
      "@type":"BreadcrumbList",
      "itemListElement":[
        {"@type":"ListItem","position":1,"name":"CalculatorSolution","item":"https://calculatorsolution.com/"},
        {"@type":"ListItem","position":2,"name":"Target Heart Rate Calculator","item":"https://calculatorsolution.com/target-heart-rate-calculator.html"}
      ]
    },
    {
      "@context":"https://schema.org",
      "@type":"HowTo",
      "name":"How to use target heart rate zones",
      "step":[
        {"@type":"HowToStep","name":"Enter age","text":"We estimate Max HR using 220 ‚àí age (rough estimate)."},
        {"@type":"HowToStep","name":"Enter resting HR (optional but recommended)","text":"Resting HR lets us compute Karvonen zones using Heart Rate Reserve (HRR)."},
        {"@type":"HowToStep","name":"Read your training zones","text":"Use zones for easy, moderate, and high-intensity workouts."}
      ]
    },
    {
      "@context":"https://schema.org",
      "@type":"FAQPage",
      "mainEntity":[
        {"@type":"Question","name":"Max HR accuracy?","acceptedAnswer":{"@type":"Answer","text":"220‚àíage is a rough estimate; real max HR varies by person."}},
        {"@type":"Question","name":"Use zones for training?","acceptedAnswer":{"@type":"Answer","text":"Yes. Different zones target endurance, aerobic fitness, and peak performance."}},
        {"@type":"Question","name":"Monitor with chest strap?","acceptedAnswer":{"@type":"Answer","text":"Chest straps are often more accurate than wrist optical sensors."}},
        {"@type":"Question","name":"Medical concerns?","acceptedAnswer":{"@type":"Answer","text":"Consult a doctor before intense training if you have health concerns."}},
        {"@type":"Question","name":"Resting HR?","acceptedAnswer":{"@type":"Answer","text":"Lower resting HR often indicates higher cardiovascular fitness."}}
      ]
    }
  ]</script>
</head>

<body>
  <header class="site-header">
    <div class="wrap">
      <a class="brand" href="/">
        <img src="/assets/logo.png" alt="CalculatorSolution logo" class="brand-logo" width="36" height="36">
        <span class="brand-text">CalculatorSolution</span>
      </a>
    </div>
  </header>

  <main class="wrap">
    <article>
      <div class="hero">
        <h1>Target Heart Rate Calculator</h1>
        <p>Find your cardio training zones using both Max HR (%) and the Karvonen (Heart Rate Reserve) method.</p>
        <div class="chips">
          <span class="chip">‚ù§Ô∏è Max HR estimate</span>
          <span class="chip">‚ö° Karvonen zones (HRR)</span>
          <span class="chip">üìä Zone table</span>
        </div>
      </div>

      <section>
        <div id="premium-target-hr">
          <div class="calc-shell">

            <!-- Inputs -->
            <div class="panel" aria-label="Target heart rate inputs">
              <div class="panel-title">
                <h2>Your details</h2>
                <span class="pill">‚úÖ Inputs</span>
              </div>

              <div class="grid-2">
                <div class="field">
                  <label for="thr_age">Age</label>
                  <input id="thr_age" class="input" type="number" inputmode="numeric" min="1" max="120" step="1" placeholder="e.g., 28">
                  <p class="help">Used for Max HR estimate: 220 ‚àí age.</p>
                </div>

                <div class="field">
                  <label for="thr_rest">Resting heart rate (optional)</label>
                  <input id="thr_rest" class="input" type="number" inputmode="numeric" min="30" max="140" step="1" placeholder="e.g., 62">
                  <p class="help">Recommended for Karvonen zones (HRR).</p>
                </div>

                <div class="field">
                  <label for="thr_method">Zone method</label>
                  <select id="thr_method" class="input">
                    <option value="both" selected>Show both (recommended)</option>
                    <option value="max">Max HR % only</option>
                    <option value="karvonen">Karvonen (HRR) only</option>
                  </select>
                  <p class="help">Karvonen uses resting HR for more personalized zones.</p>
                </div>

                <div class="field">
                  <label for="thr_round">Round BPM</label>
                  <select id="thr_round" class="input">
                    <option value="0" selected>No rounding</option>
                    <option value="1">Nearest 1</option>
                    <option value="5">Nearest 5</option>
                  </select>
                  <p class="help">Helps match wearable display rounding.</p>
                </div>
              </div>

              <div class="actions">
                <button class="btn" id="thr_calc_btn" type="button">Calculate</button>
                <button class="btn btn-dark" id="thr_example_btn" type="button">Try Example</button>
                <button class="btn btn-ghost" id="thr_reset_btn" type="button">Reset</button>
              </div>

              <div class="note mini">
                <strong>Important:</strong> These are training estimates, not medical advice.
                If you have chest pain, dizziness, or known heart conditions, consult a clinician before intense exercise.
              </div>
            </div>

            <!-- Results -->
            <div class="panel sticky" aria-label="Target heart rate results">
              <div class="panel-title">
                <h2>Results</h2>
                <span class="pill">üî• Output</span>
              </div>

              <div class="metric">
                <p class="k">Estimated Max HR</p>
                <p class="v" id="thr_out_max">‚Äî</p>
                <p class="mini" id="thr_out_max_note">‚Äî</p>
              </div>

              <div class="metric alt">
                <p class="k">Resting HR</p>
                <p class="v" id="thr_out_rest">‚Äî</p>
                <p class="mini" id="thr_out_rest_note">Enter resting HR to enable Karvonen zones.</p>
              </div>

              <div class="metric">
                <p class="k">Heart Rate Reserve (HRR)</p>
                <p class="v" id="thr_out_hrr">‚Äî</p>
                <div class="bar"><span id="thr_bar_hrr"></span></div>
                <p class="mini" id="thr_out_hrr_note">‚Äî</p>
              </div>

              <div class="metric alt">
                <p class="k">Summary</p>
                <p class="mini" id="thr_out_summary">Enter age to see your zones.</p>
              </div>
            </div>

          </div>

          <h2 style="margin:18px 0 6px;">Training Zones</h2>
          <p class="mini" style="margin:0 0 10px;">Zones are shown in beats per minute (BPM). Use conversational effort + breathing as a sanity check.</p>

          <div class="table-wrap">
            <table aria-label="Target heart rate zones table">
              <thead>
                <tr>
                  <th>Zone</th>
                  <th>Intensity</th>
                  <th>Max HR %</th>
                  <th>Target BPM (Max HR)</th>
                  <th>HRR % (Karvonen)</th>
                  <th>Target BPM (Karvonen)</th>
                  <th>What it feels like</th>
                </tr>
              </thead>
              <tbody id="thr_table">
                <tr><td colspan="7" class="mini">Click <strong>Calculate</strong> to generate zones.</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <section style="margin-top:18px;">
        <h2>Explanation</h2>
        <p>
          A <strong>target heart rate</strong> range helps you train at the right intensity for your goal:
          easy recovery, fat-loss cardio, endurance, tempo, or intervals.
          This calculator provides two common approaches:
        </p>
        <ul>
          <li><strong>Max HR method:</strong> zones are percentages of estimated max heart rate (220 ‚àí age).</li>
          <li><strong>Karvonen (HRR) method:</strong> uses <em>resting HR</em> to personalize zones using heart rate reserve.</li>
        </ul>
        <p class="mini">
          Tip: Wearables can lag during intervals. For accuracy, use a chest strap and pay attention to breathing and perceived effort.
        </p>
      </section>

      <section>
        <h3>Formula</h3>
        <pre>Max HR ‚âà 220 ‚àí age
HRR = Max HR ‚àí Resting HR
Karvonen target = Resting HR + (HRR √ó intensity%)</pre>
      </section>

      <section class="faqs">
        <h3>FAQs</h3>
        <details class="card"><summary><strong>Max HR accuracy?</strong></summary><p>220‚àíage is a rough estimate; individual variation exists.</p></details>
        <details class="card"><summary><strong>Use zones for training?</strong></summary><p>Yes ‚Äî different zones target endurance, cardio fitness, and peak performance.</p></details>
        <details class="card"><summary><strong>Monitor with chest strap?</strong></summary><p>Chest straps are often more accurate than wrist optical sensors.</p></details>
        <details class="card"><summary><strong>Medical concerns?</strong></summary><p>Consult a doctor before intense training if health issues exist.</p></details>
        <details class="card"><summary><strong>Resting HR?</strong></summary><p>Lower resting HR often indicates higher cardiovascular fitness.</p></details>
      </section>

      <section class="related" style="margin-top:18px;">
        <h3>Related calculators</h3>
        <div class="cards-grid related-grid">
          <a class="card" href="bmr-calculator.html"><h4>BMR Calculator</h4><p>Estimate basal metabolic rate from age, sex, height and weight.</p></a>
          <a class="card" href="body-fat-percentage-calculator.html"><h4>Body Fat Percentage Calculator</h4><p>Estimate body fat using measurements or formulas.</p></a>
          <a class="card" href="daily-calorie-needs-calculator.html"><h4>Daily Calorie Needs Calculator</h4><p>Estimate daily calories based on activity level.</p></a>
          <a class="card" href="ideal-weight-calculator.html"><h4>Ideal Weight Calculator</h4><p>Estimate ideal weight ranges from BMI or other formulas.</p></a>
        </div>
      </section>
    </article>
  </main>

  <footer class="site-footer">
    <div class="wrap">
      <p>&copy; CalculatorSolution</p>
      <p style="margin-top:8px;font-size:0.9rem;line-height:1.8;display:flex;flex-wrap:wrap;gap:10px;">
        <a href="/sitemap.xml">Sitemap</a>
        <span aria-hidden="true">|</span>
        <a href="/">Home</a>
        <span aria-hidden="true">|</span>
        <a href="/privacy-policy.html">Privacy Policy</a>
        <span aria-hidden="true">|</span>
        <a href="/terms-of-service.html">Terms</a>
        <span aria-hidden="true">|</span>
        <a href="/contact.html">Contact</a>
        <span aria-hidden="true">|</span>
        <a href="/about.html">About</a>
      </p>
    </div>
  </footer>

  <script>
    (function(){
      const $ = (id)=>document.getElementById(id);

      const ageEl = $('thr_age');
      const restEl = $('thr_rest');
      const methodEl = $('thr_method');
      const roundEl = $('thr_round');

      const outMax = $('thr_out_max');
      const outMaxNote = $('thr_out_max_note');
      const outRest = $('thr_out_rest');
      const outRestNote = $('thr_out_rest_note');
      const outHrr = $('thr_out_hrr');
      const outHrrNote = $('thr_out_hrr_note');
      const barHrr = $('thr_bar_hrr');
      const outSummary = $('thr_out_summary');
      const tbody = $('thr_table');

      function roundTo(x, step){
        step = parseInt(step,10) || 0;
        if(!step) return x;
        return Math.round(x/step)*step;
      }

      function bpm(n){
        if(!isFinite(n)) return '‚Äî';
        return String(Math.round(n)) + ' bpm';
      }

      // Zones (common ranges)
      // We'll show both methods aligned to same zone labels
      const zones = [
        { name:'Zone 1', label:'Recovery', maxPct:[50,60], hrrPct:[50,60], feel:'Very easy, can talk comfortably.' },
        { name:'Zone 2', label:'Endurance / Fat burn', maxPct:[60,70], hrrPct:[60,70], feel:'Easy, steady, long duration.' },
        { name:'Zone 3', label:'Aerobic', maxPct:[70,80], hrrPct:[70,80], feel:'Moderate, talking gets harder.' },
        { name:'Zone 4', label:'Threshold', maxPct:[80,90], hrrPct:[80,90], feel:'Hard, short phrases only.' },
        { name:'Zone 5', label:'VO‚ÇÇ Max / Peak', maxPct:[90,100], hrrPct:[90,100], feel:'Very hard, interval effort.' }
      ];

      function calc(){
        const age = parseFloat(ageEl.value);
        const rest = parseFloat(restEl.value);
        const method = methodEl.value;
        const step = parseInt(roundEl.value,10) || 0;

        if(!isFinite(age) || age<=0 || age>120){
          outMax.textContent='‚Äî';
          outMaxNote.textContent='Enter a valid age (1‚Äì120).';
          outRest.textContent='‚Äî';
          outHrr.textContent='‚Äî';
          outSummary.textContent='Enter age to see your zones.';
          barHrr.style.width='0%';
          tbody.innerHTML = '<tr><td colspan="7" class="mini">Enter valid inputs and click <strong>Calculate</strong>.</td></tr>';
          return;
        }

        const maxHR = 220 - age;
        outMax.textContent = bpm(maxHR);
        outMaxNote.textContent = 'Estimate uses 220 ‚àí age (rough).';

        const hasRest = isFinite(rest) && rest>=30 && rest<=140 && rest < maxHR;
        outRest.textContent = hasRest ? bpm(rest) : '‚Äî';
        outRestNote.textContent = hasRest ? 'Used for Karvonen zones.' : 'Enter resting HR (30‚Äì140) to enable Karvonen zones.';

        const hrr = hasRest ? (maxHR - rest) : NaN;
        outHrr.textContent = hasRest ? bpm(hrr) : '‚Äî';
        outHrrNote.textContent = hasRest ? 'HRR = Max HR ‚àí Resting HR' : '‚Äî';

        // HRR bar (relative scale)
        if(hasRest){
          const pct = Math.max(0, Math.min(100, (hrr / maxHR) * 100));
          barHrr.style.width = pct.toFixed(1) + '%';
          barHrr.style.background = 'linear-gradient(90deg, rgba(168,85,247,.9), rgba(59,130,246,.9))';
        } else {
          barHrr.style.width = '0%';
        }

        // Build table
        const rows = [];
        for(const z of zones){
          // Max HR method
          const maxLo = roundTo(maxHR * (z.maxPct[0]/100), step);
          const maxHi = roundTo(maxHR * (z.maxPct[1]/100), step);

          // Karvonen method (if rest present)
          const kLo = hasRest ? roundTo(rest + (hrr * (z.hrrPct[0]/100)), step) : NaN;
          const kHi = hasRest ? roundTo(rest + (hrr * (z.hrrPct[1]/100)), step) : NaN;

          const showMax = (method === 'both' || method === 'max');
          const showK   = (method === 'both' || method === 'karvonen');

          rows.push(`
            <tr>
              <td><strong>${z.name}</strong></td>
              <td>${z.label}</td>
              <td>${showMax ? `${z.maxPct[0]}‚Äì${z.maxPct[1]}%` : '‚Äî'}</td>
              <td>${showMax ? `${Math.round(maxLo)}‚Äì${Math.round(maxHi)} bpm` : '‚Äî'}</td>
              <td>${showK ? `${z.hrrPct[0]}‚Äì${z.hrrPct[1]}%` : '‚Äî'}</td>
              <td>${showK ? (hasRest ? `${Math.round(kLo)}‚Äì${Math.round(kHi)} bpm` : 'Add resting HR') : '‚Äî'}</td>
              <td>${z.feel}</td>
            </tr>
          `);
        }
        tbody.innerHTML = rows.join('');

        const methodText =
          method === 'both' ? 'Max HR + Karvonen' :
          method === 'max' ? 'Max HR only' : 'Karvonen only';

        outSummary.textContent =
          `Age ${Math.round(age)} ‚Üí Max HR ~${Math.round(maxHR)} bpm ‚Ä¢ Method: ${methodText}${hasRest ? ` ‚Ä¢ Resting ${Math.round(rest)} bpm` : ''}.`;
      }

      $('thr_calc_btn').addEventListener('click', calc);

      $('thr_example_btn').addEventListener('click', ()=>{
        ageEl.value = '28';
        restEl.value = '62';
        methodEl.value = 'both';
        roundEl.value = '1';
        calc();
      });

      $('thr_reset_btn').addEventListener('click', ()=>{
        ageEl.value = '';
        restEl.value = '';
        methodEl.value = 'both';
        roundEl.value = '0';
        outMax.textContent='‚Äî';
        outMaxNote.textContent='‚Äî';
        outRest.textContent='‚Äî';
        outRestNote.textContent='Enter resting HR to enable Karvonen zones.';
        outHrr.textContent='‚Äî';
        outHrrNote.textContent='‚Äî';
        outSummary.textContent='Enter age to see your zones.';
        barHrr.style.width='0%';
        tbody.innerHTML = '<tr><td colspan="7" class="mini">Click <strong>Calculate</strong> to generate zones.</td></tr>';
      });

      [ageEl,restEl,methodEl,roundEl].forEach(el=>{
        el.addEventListener('input', ()=>{ if(ageEl.value) calc(); });
        el.addEventListener('change', ()=>{ if(ageEl.value) calc(); });
      });
    })();
  </script>
</body>
</html>
