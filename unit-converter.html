<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <title>Unit Converter (Length, Weight, Temperature, Area, Volume) | CalculatorSolution</title>
  <meta name="description" content="Free Unit Converter: instantly convert length, weight, temperature, area, volume, speed, time, pressure, energy, power and more. Accurate, fast, and mobile-friendly.">

  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://calculatorsolution.com/unit-converter.html">

  <meta property="og:title" content="Unit Converter">
  <meta property="og:description" content="Convert units across length, mass, temperature, area, volume, speed, time, pressure, energy, and power ‚Äî instantly.">
  <meta property="og:image" content="https://calculatorsolution.com/assets/og-image.svg">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://calculatorsolution.com/assets/og-image.svg">

  <link rel="icon" href="/assets/og-image.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/assets/logo.png">
  <link rel="manifest" href="/assets/site.webmanifest">

  <!-- Global CSS -->
  <link rel="preload" href="/assets/style.css" as="style" onload="this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="/assets/style.css"></noscript>

  <!-- Premium critical CSS (RESPONSIVE + UI/UX improvements; NO JS logic changes) -->
  <style>
    html,body{height:100%;margin:0}
    body{
      font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial;
      background:radial-gradient(1200px 700px at 10% 10%, rgba(59,130,246,.14), transparent 60%),
                 radial-gradient(900px 600px at 90% 20%, rgba(168,85,247,.14), transparent 55%),
                 linear-gradient(135deg,#f8fafc,#f1f5f9);
      color:#0f172a; line-height:1.6; min-height:100vh;
      -webkit-text-size-adjust:100%;
      text-rendering:optimizeLegibility;
    }
    *{box-sizing:border-box}
    :root{
      --pad-x:18px;
      --radius-1:12px;
      --radius-2:16px;
      --radius-3:18px;
    }
    .wrap{max-width:1100px;margin:0 auto;padding:0 var(--pad-x)}
    a{color:inherit}

    /* Header */
    .site-header{
      padding:14px 0;border-bottom:1px solid #e2e8f0;
      background:rgba(255,255,255,.65);backdrop-filter:blur(10px);
      position:sticky;top:0;z-index:10;
    }
    .brand{display:flex;align-items:center;gap:10px;text-decoration:none;min-height:44px}
    .brand-text{font-weight:900;color:#2563eb;font-size:1.15rem}
    .brand-logo{border-radius:10px}

    /* Hero */
    .hero{
      margin:18px 0 14px 0;border-radius:var(--radius-3);padding:26px 18px;
      color:#fff;background:linear-gradient(135deg,#2563eb,#a855f7);
      box-shadow:0 18px 50px rgba(2,6,23,.15);
      position:relative;overflow:hidden;
    }
    .hero:before{
      content:""; position:absolute; inset:-60px -60px auto auto;
      width:240px;height:240px;border-radius:999px;
      background:rgba(255,255,255,.16);
      transform:rotate(10deg);
      pointer-events:none;
    }
    .hero h1{margin:0 0 6px 0;font-size:1.85rem;letter-spacing:-.02em}
    .hero p{margin:0;opacity:.95;max-width:72ch}
    .chips{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .chip{
      display:inline-flex;align-items:center;gap:8px;
      padding:7px 10px;border-radius:999px;
      background:rgba(255,255,255,.14);
      border:1px solid rgba(255,255,255,.18);
      font-weight:800;font-size:.88rem;
      white-space:nowrap;
    }

    /* Main layout */
    .calc-shell{
      display:grid;
      grid-template-columns:1.1fr .9fr;
      gap:14px;
      align-items:start;
      margin-top:14px;
    }

    /* Panels */
    .panel{
      background:rgba(255,255,255,.92);
      border:1px solid #e2e8f0;border-radius:var(--radius-2);
      box-shadow:0 14px 40px rgba(8,13,26,.06);
      padding:14px;
      overflow:hidden;
    }
    .panel-title{
      display:flex;align-items:center;justify-content:space-between;gap:10px;
      margin-bottom:10px;
      flex-wrap:wrap;
    }
    .panel-title h2{margin:0;font-size:1.05rem}
    .pill{
      display:inline-flex;gap:8px;align-items:center;
      padding:6px 10px;border-radius:999px;
      background:rgba(37,99,235,.10);color:#1d4ed8;
      font-weight:900;font-size:.85rem;
      white-space:nowrap;
    }

    /* Inputs grid */
    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .field{display:flex;flex-direction:column;gap:6px;min-width:0}
    .field label{font-weight:900;font-size:.92rem}
    .input{
      width:100%;
      padding:10px 12px;border:1px solid #e2e8f0;border-radius:var(--radius-1);
      font-size:1rem;background:#fff;outline:none;
      min-height:44px; /* touch target */
      appearance:none;
    }
    select.input{padding-right:36px}
    .input:focus{border-color:#93c5fd;box-shadow:0 0 0 4px rgba(59,130,246,.12)}
    .help{margin:0;font-size:.86rem;color:#64748b}

    /* Actions */
    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    .btn{
      display:inline-flex;align-items:center;justify-content:center;
      padding:10px 14px;border-radius:var(--radius-1);
      font-weight:900;border:0;cursor:pointer;
      background:linear-gradient(90deg,#2563eb,#60a5fa);
      color:#fff; box-shadow:0 12px 26px rgba(37,99,235,.18);
      transition:transform .2s, box-shadow .2s;
      min-height:44px;
      white-space:nowrap;
      user-select:none;
      -webkit-tap-highlight-color:transparent;
    }
    .btn:hover{transform:translateY(-2px);box-shadow:0 16px 34px rgba(37,99,235,.22)}
    .btn:active{transform:translateY(0)}
    .btn:focus-visible{outline:3px solid rgba(59,130,246,.35);outline-offset:2px}
    .btn-ghost{background:#fff;color:#0f172a;border:1px solid #e2e8f0;box-shadow:none}
    .btn-dark{background:#0f172a;box-shadow:0 14px 30px rgba(2,6,23,.18)}

    /* Sticky results */
    .sticky{position:sticky;top:82px}

    /* Metrics */
    .metric{
      border:1px solid #e2e8f0;border-radius:var(--radius-2);padding:12px;
      background:linear-gradient(180deg, rgba(37,99,235,.10), rgba(255,255,255,.92));
      margin-bottom:10px;
      overflow-wrap:anywhere;
    }
    .metric.alt{
      background:linear-gradient(180deg, rgba(168,85,247,.10), rgba(255,255,255,.92));
    }
    .metric .k{margin:0;color:#475569;font-size:.86rem;font-weight:800}
    .metric .v{margin:4px 0 0;font-size:1.55rem;font-weight:1000;letter-spacing:-.02em;line-height:1.2}
    .mini{font-size:.86rem;color:#64748b}

    /* Cards + FAQ */
    .card{
      background:#fff;border:1px solid #e2e8f0;border-radius:14px;
      box-shadow:0 10px 24px rgba(8,13,26,.05);
      padding:12px;
    }
    details.card{padding:0;overflow:hidden}
    details.card summary{
      cursor:pointer;padding:12px;
      list-style:none;
      min-height:44px;
      display:flex;align-items:center;
      gap:10px;
    }
    details.card summary::-webkit-details-marker{display:none}
    details.card summary:focus-visible{outline:3px solid rgba(59,130,246,.25);outline-offset:2px}
    details.card p{padding:0 12px 12px;margin:0;color:#334155}

    /* Content sections */
    article{padding-bottom:26px}
    section{margin-top:16px}
    h2,h3{line-height:1.25}
    pre{
      white-space:pre-wrap;
      word-break:break-word;
      background:#0b1220;
      color:#e2e8f0;
      padding:12px 14px;
      border-radius:12px;
      overflow:auto;
      font-size:.95rem;
    }

    /* Related grid: ensure it's responsive even if global CSS misses it */
    .related-grid{
      display:grid;
      grid-template-columns:repeat(4, minmax(0,1fr));
      gap:12px;
    }
    .related-grid .card h4{margin:0 0 6px}
    .related-grid .card p{margin:0;color:#475569}

    /* Footer links wrap nicely on mobile */
    .site-footer a{color:inherit}
    .site-footer p{margin:0}
    .site-footer .wrap{word-break:break-word}

    /* --- Responsive breakpoints --- */
    @media (max-width: 1100px){
      .wrap{padding:0 16px}
    }

    @media (max-width: 920px){
      .calc-shell{grid-template-columns:1fr}
      .sticky{position:static;top:auto}
      .hero{padding:22px 16px}
      .hero h1{font-size:1.65rem}
      .related-grid{grid-template-columns:repeat(2, minmax(0,1fr))}
    }

    @media (max-width: 640px){
      :root{--pad-x:14px}
      .hero{margin:14px 0 12px}
      .chips{gap:8px}
      .chip{font-size:.84rem;padding:6px 10px}
      .grid-2{grid-template-columns:1fr}
      .panel{padding:12px}
      .metric .v{font-size:1.35rem}
      .actions{gap:8px}
      .btn{width:100%}
      .related-grid{grid-template-columns:1fr}
      details.card summary{padding:12px}
    }

    @media (max-width: 380px){
      .brand-text{font-size:1.05rem}
      .hero h1{font-size:1.45rem}
    }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce){
      .card,.btn{transition:none}
      .btn:hover{transform:none}
    }
  </style>

  <!-- GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-Y5YHCPQPFS"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments)}
    gtag('js', new Date());
    gtag('config', 'G-Y5YHCPQPFS');
  </script>

  <!-- Schema: WebPage + Breadcrumb + HowTo + FAQ -->
  <script type="application/ld+json">[
    {
      "@context":"https://schema.org",
      "@type":"WebPage",
      "name":"Unit Converter",
      "url":"https://calculatorsolution.com/unit-converter.html",
      "description":"Convert units across length, mass, temperature, area, volume, speed, time, pressure, energy and power."
    },
    {
      "@context":"https://schema.org",
      "@type":"BreadcrumbList",
      "itemListElement":[
        {"@type":"ListItem","position":1,"name":"CalculatorSolution","item":"https://calculatorsolution.com/"},
        {"@type":"ListItem","position":2,"name":"Unit Converter","item":"https://calculatorsolution.com/unit-converter.html"}
      ]
    },
    {
      "@context":"https://schema.org",
      "@type":"HowTo",
      "name":"How to use the Unit Converter",
      "step":[
        {"@type":"HowToStep","name":"Choose category","text":"Select what you want to convert: length, weight, temperature, area, volume, speed, etc."},
        {"@type":"HowToStep","name":"Pick units","text":"Select the 'from' unit and the 'to' unit."},
        {"@type":"HowToStep","name":"Enter value","text":"Type the value to convert. The result updates instantly."}
      ]
    },
    {
      "@context":"https://schema.org",
      "@type":"FAQPage",
      "mainEntity":[
        {"@type":"Question","name":"Temperature conversion?","acceptedAnswer":{"@type":"Answer","text":"Temperature needs an offset: ¬∞F = (¬∞C √ó 9/5) + 32, and K = ¬∞C + 273.15."}},
        {"@type":"Question","name":"Precision?","acceptedAnswer":{"@type":"Answer","text":"Use more decimals for scientific work and fewer decimals for everyday use. This converter lets you set decimal places."}},
        {"@type":"Question","name":"Which units are supported?","acceptedAnswer":{"@type":"Answer","text":"Common SI and imperial units are included across multiple categories like length, mass, volume and speed."}},
        {"@type":"Question","name":"Compound units (mph, kWh)?","acceptedAnswer":{"@type":"Answer","text":"Compound units are supported in relevant categories like speed and energy using standard definitions."}},
        {"@type":"Question","name":"Custom units?","acceptedAnswer":{"@type":"Answer","text":"You can add a custom factor for simple linear conversions (value √ó factor). Temperature needs a formula (offset + scale)."}}
      ]
    }
  ]</script>
</head>

<body>
  <header class="site-header">
    <div class="wrap">
      <a class="brand" href="/">
        <img src="/assets/logo.png" alt="CalculatorSolution logo" class="brand-logo" width="36" height="36">
        <span class="brand-text">CalculatorSolution</span>
      </a>
    </div>
  </header>

  <main class="wrap">
    <article>
      <div class="hero">
        <h1>Unit Converter</h1>
        <p>Convert length, weight, temperature, area, volume, speed and more ‚Äî instantly, accurately, and mobile-friendly.</p>
        <div class="chips">
          <span class="chip">‚ö° Instant conversion</span>
          <span class="chip">üéØ Decimal control</span>
          <span class="chip">üîÅ Swap units</span>
        </div>
      </div>

      <section>
        <div id="premium-unit-converter">
          <div class="calc-shell">

            <!-- Inputs -->
            <div class="panel" aria-label="Unit converter inputs">
              <div class="panel-title">
                <h2>Convert units</h2>
                <span class="pill">‚úÖ Inputs</span>
              </div>

              <div class="grid-2">
                <div class="field">
                  <label for="uc_category">Category</label>
                  <select id="uc_category" class="input"></select>
                  <p class="help">Choose a unit group (length, mass, temperature, etc.).</p>
                </div>

                <div class="field">
                  <label for="uc_decimals">Decimal places</label>
                  <select id="uc_decimals" class="input">
                    <option value="0">0</option>
                    <option value="2" selected>2</option>
                    <option value="4">4</option>
                    <option value="6">6</option>
                    <option value="8">8</option>
                  </select>
                  <p class="help">More decimals for precision conversions.</p>
                </div>

                <div class="field">
                  <label for="uc_value">Value</label>
                  <input id="uc_value" class="input" type="number" inputmode="decimal" step="any" placeholder="e.g., 10">
                  <p class="help" id="uc_value_help">Enter the number you want to convert.</p>
                </div>

                <div class="field">
                  <label for="uc_from">From</label>
                  <select id="uc_from" class="input"></select>
                  <p class="help">Choose the source unit.</p>
                </div>

                <div class="field">
                  <label for="uc_to">To</label>
                  <select id="uc_to" class="input"></select>
                  <p class="help">Choose the target unit.</p>
                </div>

                <div class="field">
                  <label for="uc_custom_factor">Custom factor (optional)</label>
                  <input id="uc_custom_factor" class="input" type="number" inputmode="decimal" step="any" placeholder="e.g., 2.54">
                  <p class="help">If set, result = value √ó factor (for linear conversions).</p>
                </div>
              </div>

              <div class="actions">
                <button class="btn" id="uc_swap_btn" type="button">Swap</button>
                <button class="btn btn-dark" id="uc_example_btn" type="button">Try Example</button>
                <button class="btn btn-ghost" id="uc_reset_btn" type="button">Reset</button>
              </div>

              <div class="mini" style="margin-top:10px;">
                Note: Temperature uses formulas (offset + scale), not only multiplication.
              </div>
            </div>

            <!-- Results -->
            <div class="panel sticky" aria-label="Unit converter results">
              <div class="panel-title">
                <h2>Result</h2>
                <span class="pill">üî• Output</span>
              </div>

              <div class="metric">
                <p class="k">Converted value</p>
                <p class="v" id="uc_out_value">‚Äî</p>
                <p class="mini" id="uc_out_note">Select units and enter a value.</p>
              </div>

              <div class="metric alt">
                <p class="k">Formula</p>
                <p class="mini" id="uc_out_formula">‚Äî</p>
              </div>

              <div class="metric">
                <p class="k">Quick copy</p>
                <p class="mini" id="uc_out_copy">‚Äî</p>
              </div>
            </div>

          </div>
        </div>
      </section>

      <section style="margin-top:18px;">
        <h2>Explanation</h2>
        <p>
          This <strong>Unit Converter</strong> helps you convert values between commonly used measurement systems (SI and imperial).
          Choose a category, select ‚Äúfrom‚Äù and ‚Äúto‚Äù units, then type a value to convert. Results update instantly.
        </p>
        <p class="mini">
          Tip: Use fewer decimals for daily use (0‚Äì2) and more decimals for engineering/science (4‚Äì8).
        </p>
      </section>

      <section>
        <h3>Formula</h3>
        <pre>Linear: converted = value √ó (toFactor / fromFactor)
Temperature:
¬∞F = (¬∞C √ó 9/5) + 32
¬∞C = (¬∞F ‚àí 32) √ó 5/9
K = ¬∞C + 273.15</pre>
      </section>

      <section class="faqs">
        <h3>FAQs</h3>
        <details class="card"><summary><strong>Temperature conversion?</strong></summary><p>Temperature needs an offset: ¬∞F = (¬∞C √ó 9/5) + 32 and K = ¬∞C + 273.15.</p></details>
        <details class="card"><summary><strong>Precision?</strong></summary><p>Use more decimals for scientific work and fewer for everyday use. This converter includes decimal control.</p></details>
        <details class="card"><summary><strong>Units list?</strong></summary><p>Common SI and imperial units are included across multiple categories.</p></details>
        <details class="card"><summary><strong>Compound units?</strong></summary><p>Speed and energy include common compound units like mph and kWh with standard definitions.</p></details>
        <details class="card"><summary><strong>Custom units?</strong></summary><p>For linear conversions, you can enter a custom factor (value √ó factor). Temperature needs a formula (offset + scale).</p></details>
      </section>

      <section class="related" style="margin-top:18px;">
        <h3>Related calculators</h3>
        <div class="cards-grid related-grid">
          <a class="card" href="age-calculator.html"><h4>Age Calculator</h4><p>Calculate age from date of birth to today or a target date.</p></a>
          <a class="card" href="date-difference-calculator.html"><h4>Date Difference Calculator</h4><p>Find difference between two dates in days, months, years.</p></a>
          <a class="card" href="time-duration-calculator.html"><h4>Time Duration Calculator</h4><p>Add/subtract times and compute durations.</p></a>
          <a class="card" href="fuel-cost-calculator.html"><h4>Fuel Cost Calculator</h4><p>Estimate trip fuel cost using distance and mileage.</p></a>
        </div>
      </section>
    </article>
  </main>

  <footer class="site-footer">
    <div class="wrap" style="padding:18px 0;color:#64748b;">
      <p>&copy; CalculatorSolution</p>
      <p style="margin-top:8px;font-size:0.9rem;">
        <a href="/sitemap.xml">Sitemap</a> |
        <a href="/">Home</a> |
        <a href="/privacy-policy.html">Privacy Policy</a> |
        <a href="/terms-of-service.html">Terms</a> |
        <a href="/contact.html">Contact</a> |
        <a href="/about.html">About</a>
      </p>
    </div>
  </footer>

  <!-- ‚úÖ JS unchanged (logic untouched) -->
  <script>
    (function(){
      const $ = (id)=>document.getElementById(id);

      // --- Conversion model ---
      // For linear units, factor means "how many base units in 1 unit".
      // Example length base = meter. factor(inch)=0.0254 (meters in 1 inch).
      const CATEGORIES = {
        "Length": {
          base: "m",
          units: {
            "Meter (m)": 1,
            "Kilometer (km)": 1000,
            "Centimeter (cm)": 0.01,
            "Millimeter (mm)": 0.001,
            "Mile (mi)": 1609.344,
            "Yard (yd)": 0.9144,
            "Foot (ft)": 0.3048,
            "Inch (in)": 0.0254,
            "Nautical mile (nmi)": 1852
          }
        },
        "Mass / Weight": {
          base: "kg",
          units: {
            "Kilogram (kg)": 1,
            "Gram (g)": 0.001,
            "Milligram (mg)": 0.000001,
            "Tonne (t)": 1000,
            "Pound (lb)": 0.45359237,
            "Ounce (oz)": 0.028349523125
          }
        },
        "Volume": {
          base: "L",
          units: {
            "Liter (L)": 1,
            "Milliliter (mL)": 0.001,
            "Cubic meter (m¬≥)": 1000,
            "US gallon (gal)": 3.785411784,
            "US quart (qt)": 0.946352946,
            "US pint (pt)": 0.473176473,
            "US cup (cup)": 0.2365882365,
            "Fluid ounce (fl oz)": 0.0295735295625
          }
        },
        "Area": {
          base: "m¬≤",
          units: {
            "Square meter (m¬≤)": 1,
            "Square kilometer (km¬≤)": 1000000,
            "Square centimeter (cm¬≤)": 0.0001,
            "Hectare (ha)": 10000,
            "Acre (ac)": 4046.8564224,
            "Square mile (mi¬≤)": 2589988.110336,
            "Square yard (yd¬≤)": 0.83612736,
            "Square foot (ft¬≤)": 0.09290304,
            "Square inch (in¬≤)": 0.00064516
          }
        },
        "Time": {
          base: "s",
          units: {
            "Second (s)": 1,
            "Millisecond (ms)": 0.001,
            "Minute (min)": 60,
            "Hour (hr)": 3600,
            "Day (day)": 86400,
            "Week (week)": 604800
          }
        },
        "Speed": {
          base: "m/s",
          units: {
            "Meter/second (m/s)": 1,
            "Kilometer/hour (km/h)": 0.2777777777778,
            "Mile/hour (mph)": 0.44704,
            "Knot (kn)": 0.5144444444444
          }
        },
        "Pressure": {
          base: "Pa",
          units: {
            "Pascal (Pa)": 1,
            "Kilopascal (kPa)": 1000,
            "Bar (bar)": 100000,
            "Atmosphere (atm)": 101325,
            "PSI (psi)": 6894.757293168
          }
        },
        "Energy": {
          base: "J",
          units: {
            "Joule (J)": 1,
            "Kilojoule (kJ)": 1000,
            "Calorie (cal)": 4.184,
            "Kilocalorie (kcal)": 4184,
            "Watt-hour (Wh)": 3600,
            "Kilowatt-hour (kWh)": 3600000
          }
        },
        "Power": {
          base: "W",
          units: {
            "Watt (W)": 1,
            "Kilowatt (kW)": 1000,
            "Megawatt (MW)": 1000000,
            "Horsepower (hp)": 745.6998715823
          }
        },
        "Temperature": {
          base: "¬∞C",
          units: {
            "Celsius (¬∞C)": "C",
            "Fahrenheit (¬∞F)": "F",
            "Kelvin (K)": "K"
          }
        }
      };

      function toNumber(v){
        const n = parseFloat(v);
        return isFinite(n) ? n : NaN;
      }

      function format(n, dp){
        if(!isFinite(n)) return "‚Äî";
        return new Intl.NumberFormat(undefined, {
          minimumFractionDigits: 0,
          maximumFractionDigits: dp
        }).format(n);
      }

      // Temperature conversions via Celsius pivot
      function tempToC(value, unit){
        if(unit === "C") return value;
        if(unit === "F") return (value - 32) * 5/9;
        if(unit === "K") return value - 273.15;
        return NaN;
      }
      function tempFromC(c, unit){
        if(unit === "C") return c;
        if(unit === "F") return (c * 9/5) + 32;
        if(unit === "K") return c + 273.15;
        return NaN;
      }

      // --- UI refs ---
      const catEl = $('uc_category');
      const fromEl = $('uc_from');
      const toEl = $('uc_to');
      const valEl = $('uc_value');
      const dpEl  = $('uc_decimals');
      const customEl = $('uc_custom_factor');

      const outVal = $('uc_out_value');
      const outNote = $('uc_out_note');
      const outFormula = $('uc_out_formula');
      const outCopy = $('uc_out_copy');

      // Populate category
      Object.keys(CATEGORIES).forEach((name)=>{
        const opt = document.createElement('option');
        opt.value = name;
        opt.textContent = name;
        catEl.appendChild(opt);
      });

      function populateUnits(){
        const cat = CATEGORIES[catEl.value];
        fromEl.innerHTML = "";
        toEl.innerHTML = "";

        const keys = Object.keys(cat.units);
        keys.forEach((u)=>{
          const o1 = document.createElement('option');
          o1.value = u;
          o1.textContent = u;
          fromEl.appendChild(o1);

          const o2 = document.createElement('option');
          o2.value = u;
          o2.textContent = u;
          toEl.appendChild(o2);
        });

        // defaults
        fromEl.selectedIndex = 0;
        toEl.selectedIndex = Math.min(1, keys.length-1);
        customEl.value = "";
      }

      function buildCopyLine(v, fromName, toName, result, dp){
        const left = `${format(v, dp)} ${fromName}`;
        const right = `${format(result, dp)} ${toName}`;
        return `${left} = ${right}`;
      }

      function calc(){
        const dp = parseInt(dpEl.value, 10) || 2;
        const value = toNumber(valEl.value);
        const catName = catEl.value;
        const cat = CATEGORIES[catName];

        if(!cat){
          outVal.textContent = "‚Äî";
          outNote.textContent = "Select a category.";
          outFormula.textContent = "‚Äî";
          outCopy.textContent = "‚Äî";
          return;
        }

        if(!isFinite(value)){
          outVal.textContent = "‚Äî";
          outNote.textContent = "Enter a value to convert.";
          outFormula.textContent = "‚Äî";
          outCopy.textContent = "‚Äî";
          return;
        }

        // Custom factor overrides linear categories (not temperature)
        const customFactor = toNumber(customEl.value);
        const fromName = fromEl.value;
        const toName = toEl.value;

        // Temperature
        if(catName === "Temperature"){
          const fromCode = cat.units[fromName];
          const toCode = cat.units[toName];

          const c = tempToC(value, fromCode);
          const result = tempFromC(c, toCode);

          outVal.textContent = format(result, dp);
          outNote.textContent = `${fromName} ‚Üí ${toName}`;
          outFormula.textContent =
            (fromCode === "C" && toCode === "F") ? "¬∞F = (¬∞C √ó 9/5) + 32" :
            (fromCode === "F" && toCode === "C") ? "¬∞C = (¬∞F ‚àí 32) √ó 5/9" :
            (fromCode === "C" && toCode === "K") ? "K = ¬∞C + 273.15" :
            (fromCode === "K" && toCode === "C") ? "¬∞C = K ‚àí 273.15" :
            (fromCode === "F" && toCode === "K") ? "K = (¬∞F ‚àí 32) √ó 5/9 + 273.15" :
            (fromCode === "K" && toCode === "F") ? "¬∞F = (K ‚àí 273.15) √ó 9/5 + 32" :
            "Converted using standard temperature formulas.";

          outCopy.textContent = buildCopyLine(value, fromName, toName, result, dp);
          return;
        }

        // Linear categories
        if(isFinite(customFactor) && customEl.value.trim() !== ""){
          const result = value * customFactor;
          outVal.textContent = format(result, dp);
          outNote.textContent = "Custom factor applied (linear).";
          outFormula.textContent = `converted = value √ó factor = ${value} √ó ${customFactor}`;
          outCopy.textContent = `${format(value, dp)} √ó ${customFactor} = ${format(result, dp)}`;
          return;
        }

        const fromFactor = cat.units[fromName];
        const toFactor = cat.units[toName];

        if(!isFinite(fromFactor) || !isFinite(toFactor)){
          outVal.textContent = "‚Äî";
          outNote.textContent = "Select valid units.";
          outFormula.textContent = "‚Äî";
          outCopy.textContent = "‚Äî";
          return;
        }

        // Convert: value * (fromFactor in base) => base => / (toFactor in base)
        const baseValue = value * fromFactor;
        const result = baseValue / toFactor;

        outVal.textContent = format(result, dp);
        outNote.textContent = `${fromName} ‚Üí ${toName}`;

        const ratio = (toFactor !== 0) ? (fromFactor / toFactor) : NaN;
        outFormula.textContent = `converted = value √ó (fromFactor / toFactor) = ${value} √ó ${ratio}`;
        outCopy.textContent = buildCopyLine(value, fromName, toName, result, dp);
      }

      $('uc_swap_btn').addEventListener('click', ()=>{
        const a = fromEl.value;
        fromEl.value = toEl.value;
        toEl.value = a;
        calc();
      });

      $('uc_example_btn').addEventListener('click', ()=>{
        catEl.value = "Length";
        populateUnits();
        valEl.value = "10";
        fromEl.value = "Kilometer (km)";
        toEl.value = "Mile (mi)";
        dpEl.value = "4";
        customEl.value = "";
        calc();
      });

      $('uc_reset_btn').addEventListener('click', ()=>{
        catEl.selectedIndex = 0;
        populateUnits();
        valEl.value = "";
        dpEl.value = "2";
        customEl.value = "";
        outVal.textContent = "‚Äî";
        outNote.textContent = "Select units and enter a value.";
        outFormula.textContent = "‚Äî";
        outCopy.textContent = "‚Äî";
      });

      catEl.addEventListener('change', ()=>{ populateUnits(); calc(); });
      [fromEl,toEl,valEl,dpEl,customEl].forEach(el=>{
        el.addEventListener('input', ()=>{ if(valEl.value !== "") calc(); });
        el.addEventListener('change', ()=>{ if(valEl.value !== "") calc(); });
      });

      // init
      catEl.value = "Length";
      populateUnits();
      calc();
    })();
  </script>
</body>
</html>
