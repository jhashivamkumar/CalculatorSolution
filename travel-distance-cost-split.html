<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <title>Travel Distance Cost Split Calculator (Fuel + Tolls) | CalculatorSolution</title>
  <meta name="description" content="Free Travel Distance Cost Split Calculator: enter distance, mileage, fuel price, tolls and passengers to split trip cost evenly or by distance. Includes per-person breakdown and summary.">

  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://calculatorsolution.com/travel-distance-cost-split.html">

  <meta property="og:title" content="Travel Distance Cost Split Calculator">
  <meta property="og:description" content="Split travel costs fairly by distance or evenly. Includes fuel estimate, tolls, total cost, and per-person share.">
  <meta property="og:image" content="https://calculatorsolution.com/assets/og-image.svg">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://calculatorsolution.com/assets/og-image.svg">

  <link rel="icon" href="/assets/og-image.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/assets/logo.png">
  <link rel="manifest" href="/assets/site.webmanifest">

  <!-- Global CSS -->
  <link rel="preload" href="/assets/style.css" as="style" onload="this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="/assets/style.css"></noscript>

  <!-- Premium critical CSS (logic unchanged, UI/UX + fully responsive improvements only) -->
  <style>
    html,body{height:100%;margin:0}
    body{
      font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial;
      background:radial-gradient(1200px 700px at 10% 10%, rgba(59,130,246,.14), transparent 60%),
                 radial-gradient(900px 600px at 90% 20%, rgba(168,85,247,.14), transparent 55%),
                 linear-gradient(135deg,#f8fafc,#f1f5f9);
      color:#0f172a; line-height:1.6; min-height:100vh;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    *{box-sizing:border-box}
    img{max-width:100%;height:auto}
    a{color:inherit}
    :focus-visible{outline:3px solid rgba(59,130,246,.35);outline-offset:3px;border-radius:10px}

    .wrap{max-width:1100px;margin:0 auto;padding:0 18px}

    .site-header{
      padding:14px 0;border-bottom:1px solid #e2e8f0;
      background:rgba(255,255,255,.65);backdrop-filter:blur(10px);
      position:sticky;top:0;z-index:10;
    }
    .brand{display:flex;align-items:center;gap:10px;text-decoration:none}
    .brand-text{font-weight:900;color:#2563eb;font-size:1.15rem;letter-spacing:-.01em}
    .brand-logo{border-radius:10px}

    .hero{
      margin:18px 0 14px 0;border-radius:18px;padding:26px 18px;
      color:#fff;background:linear-gradient(135deg,#2563eb,#a855f7);
      box-shadow:0 18px 50px rgba(2,6,23,.15);
      position:relative;overflow:hidden;
    }
    .hero:before{
      content:""; position:absolute; inset:-60px -60px auto auto;
      width:240px;height:240px;border-radius:999px;
      background:rgba(255,255,255,.16);
      transform:rotate(10deg);
    }
    .hero h1{margin:0 0 6px 0;font-size:1.85rem;letter-spacing:-.02em}
    .hero p{margin:0;opacity:.95}
    .chips{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .chip{
      display:inline-flex;align-items:center;gap:8px;
      padding:7px 10px;border-radius:999px;
      background:rgba(255,255,255,.14);
      border:1px solid rgba(255,255,255,.18);
      font-weight:800;font-size:.88rem;
      white-space:nowrap;
    }

    /* Layout */
    .calc-shell{
      display:grid;grid-template-columns:1.1fr .9fr;
      gap:14px;align-items:start;margin-top:14px;
    }

    .panel{
      background:rgba(255,255,255,.92);
      border:1px solid #e2e8f0;border-radius:16px;
      box-shadow:0 14px 40px rgba(8,13,26,.06);
      padding:14px;
    }
    .panel-title{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:10px}
    .panel-title h2{margin:0;font-size:1.05rem;letter-spacing:-.01em}
    .pill{
      display:inline-flex;gap:8px;align-items:center;
      padding:6px 10px;border-radius:999px;
      background:rgba(37,99,235,.10);color:#1d4ed8;
      font-weight:900;font-size:.85rem;
      white-space:nowrap;
    }

    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .field{display:flex;flex-direction:column;gap:6px;min-width:0}
    .field label{font-weight:900;font-size:.92rem;letter-spacing:-.01em}
    .input{
      padding:10px 12px;border:1px solid #e2e8f0;border-radius:12px;
      font-size:1rem;background:#fff;outline:none;
      min-width:0;
    }
    select.input{appearance:none}
    .input:focus{border-color:#93c5fd;box-shadow:0 0 0 4px rgba(59,130,246,.12)}
    .help{margin:0;font-size:.86rem;color:#64748b}

    /* Make "inline rows" (input + select) wrap nicely on small screens */
    .inline-row{display:flex;gap:10px;flex-wrap:wrap}
    .inline-row > .input{flex:1 1 170px}
    .inline-row > select.input{flex:0 0 140px;max-width:140px}
    @media (max-width:420px){
      .inline-row > select.input{flex:1 1 170px;max-width:none}
    }

    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    .btn{
      display:inline-flex;align-items:center;justify-content:center;
      padding:10px 14px;border-radius:12px;
      font-weight:900;border:0;cursor:pointer;
      background:linear-gradient(90deg,#2563eb,#60a5fa);
      color:#fff; box-shadow:0 12px 26px rgba(37,99,235,.18);
      transition:transform .2s, box-shadow .2s;
      user-select:none; -webkit-tap-highlight-color:transparent;
      min-height:44px;
    }
    .btn:hover{transform:translateY(-2px);box-shadow:0 16px 34px rgba(37,99,235,.22)}
    .btn:active{transform:translateY(0px)}
    .btn-ghost{background:#fff;color:#0f172a;border:1px solid #e2e8f0;box-shadow:none}
    .btn-dark{background:#0f172a;box-shadow:0 14px 30px rgba(2,6,23,.18)}
    .btn:disabled{opacity:.55;cursor:not-allowed;transform:none;box-shadow:none}

    /* Sticky results: safe offset on different header heights */
    .sticky{position:sticky;top:82px}
    @media (max-width:920px){.sticky{position:static}}

    .metric{
      border:1px solid #e2e8f0;border-radius:16px;padding:12px;
      background:linear-gradient(180deg, rgba(37,99,235,.10), rgba(255,255,255,.92));
      margin-bottom:10px;
    }
    .metric.alt{
      background:linear-gradient(180deg, rgba(168,85,247,.10), rgba(255,255,255,.92));
    }
    .metric .k{margin:0;color:#475569;font-size:.86rem;font-weight:800}
    .metric .v{margin:4px 0 0;font-size:1.55rem;font-weight:1000;letter-spacing:-.02em}
    .mini{font-size:.86rem;color:#64748b}

    .bar{height:10px;border-radius:999px;background:#e2e8f0;overflow:hidden;margin-top:10px}
    .bar > span{display:block;height:100%;width:0%}

    /* Table: better mobile behavior, keep your min-width logic */
    .table-wrap{
      overflow:auto;
      -webkit-overflow-scrolling:touch;
      border:1px solid #e2e8f0;border-radius:16px;background:#fff;
      box-shadow:0 12px 26px rgba(8,13,26,.05)
    }
    table{width:100%;border-collapse:collapse;min-width:860px}
    th,td{padding:10px 12px;border-bottom:1px solid #e2e8f0;text-align:left;font-size:.95rem;vertical-align:top}
    th{background:#f8fafc;font-weight:1000;position:sticky;top:0;z-index:1}
    tr:last-child td{border-bottom:0}

    .note{
      border:1px dashed #cbd5e1;border-radius:14px;padding:12px;background:rgba(255,255,255,.7);
      margin-top:10px
    }

    .card{background:#fff;border:1px solid #e2e8f0;border-radius:14px;box-shadow:0 10px 24px rgba(8,13,26,.05);padding:12px}
    details.card{padding:0}
    details.card summary{cursor:pointer;padding:12px;list-style:none}
    details.card summary::-webkit-details-marker{display:none}
    details.card p{padding:0 12px 12px;margin:0;color:#334155}
    .faqs details.card + details.card{margin-top:10px}

    /* Related cards: ensure good wrap even if global CSS missing */
    .cards-grid{display:grid;gap:12px}
    .related-grid{grid-template-columns:repeat(4,1fr)}
    .related-grid .card{display:block;text-decoration:none}
    .related-grid h4{margin:0 0 6px;font-size:1rem;letter-spacing:-.01em}
    .related-grid p{margin:0;color:#475569}
    @media (max-width:980px){.related-grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:520px){.related-grid{grid-template-columns:1fr}}

    /* Person rows (distance split): make responsive without changing JS logic */
    #tc_people [data-person]{grid-template-columns:1.2fr .8fr .6fr}
    @media (max-width:720px){
      #tc_people [data-person]{grid-template-columns:1fr}
    }

    /* Typography: keep long <pre> readable on mobile */
    pre{
      white-space:pre-wrap;
      word-break:break-word;
      overflow:auto;
      -webkit-overflow-scrolling:touch;
      background:rgba(255,255,255,.7);
      border:1px solid #e2e8f0;
      border-radius:14px;
      padding:12px;
    }

    /* Responsive adjustments */
    @media (max-width: 920px){
      .calc-shell{grid-template-columns:1fr}
      table{min-width:680px}
      .hero{padding:22px 16px}
      .hero h1{font-size:1.65rem}
    }
    @media (max-width: 640px){
      .wrap{padding:0 14px}
      .hero{border-radius:16px}
      .grid-2{grid-template-columns:1fr}
      .metric .v{font-size:1.35rem}
      .actions{gap:8px}
      .btn{width:100%}
      .chip{font-size:.84rem}
      .site-header{padding:12px 0}
    }
    @media (max-width: 360px){
      .brand-text{font-size:1.05rem}
    }
  </style>

  <!-- GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-Y5YHCPQPFS"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments)}
    gtag('js', new Date());
    gtag('config', 'G-Y5YHCPQPFS');
  </script>

  <!-- Schema: WebPage + Breadcrumb + HowTo + FAQ -->
  <script type="application/ld+json">[
    {
      "@context":"https://schema.org",
      "@type":"WebPage",
      "name":"Travel Distance Cost Split Calculator",
      "url":"https://calculatorsolution.com/travel-distance-cost-split.html",
      "description":"Split trip costs by distance or evenly among travelers. Includes fuel estimate and toll allocation."
    },
    {
      "@context":"https://schema.org",
      "@type":"BreadcrumbList",
      "itemListElement":[
        {"@type":"ListItem","position":1,"name":"CalculatorSolution","item":"https://calculatorsolution.com/"},
        {"@type":"ListItem","position":2,"name":"Travel Distance Cost Split","item":"https://calculatorsolution.com/travel-distance-cost-split.html"}
      ]
    },
    {
      "@context":"https://schema.org",
      "@type":"HowTo",
      "name":"How to split travel cost",
      "step":[
        {"@type":"HowToStep","name":"Enter trip details","text":"Add total distance, mileage (fuel efficiency) and fuel price to estimate fuel cost."},
        {"@type":"HowToStep","name":"Add tolls and extra costs","text":"Enter tolls/parking/other costs to include them in the total."},
        {"@type":"HowToStep","name":"Choose split method","text":"Split evenly by passengers or split by distance traveled by each traveler."}
      ]
    },
    {
      "@context":"https://schema.org",
      "@type":"FAQPage",
      "mainEntity":[
        {"@type":"Question","name":"Split by distance?","acceptedAnswer":{"@type":"Answer","text":"Distance-based splitting is fair when travelers ride for different distances or join/exit at different stops."}},
        {"@type":"Question","name":"Split evenly?","acceptedAnswer":{"@type":"Answer","text":"Equal split is simplest when everyone travels together for the same route."}},
        {"@type":"Question","name":"Include tolls?","acceptedAnswer":{"@type":"Answer","text":"You can include tolls and extra charges, then split them evenly or proportionally by distance."}},
        {"@type":"Question","name":"Round amounts?","acceptedAnswer":{"@type":"Answer","text":"Rounding to the nearest 1/10/100 helps with cash or UPI settlements."}},
        {"@type":"Question","name":"Multiple stops?","acceptedAnswer":{"@type":"Answer","text":"Add each traveler‚Äôs distance, or compute per-leg distances and sum them for each person."}}
      ]
    }
  ]</script>
</head>

<body>
  <header class="site-header">
    <div class="wrap">
      <a class="brand" href="/">
        <img src="/assets/logo.png" alt="CalculatorSolution logo" class="brand-logo" width="36" height="36">
        <span class="brand-text">CalculatorSolution</span>
      </a>
    </div>
  </header>

  <main class="wrap">
    <article>
      <div class="hero">
        <h1>Travel Distance Cost Split</h1>
        <p>Split fuel + tolls fairly ‚Äî either equal split or distance-based split (for different drop points).</p>
        <div class="chips">
          <span class="chip">‚õΩ Fuel estimate</span>
          <span class="chip">üßæ Tolls + extras</span>
          <span class="chip">üë• Split method</span>
        </div>
      </div>

      <section>
        <div id="premium-travel-cost-split">
          <div class="calc-shell">

            <!-- Inputs -->
            <div class="panel" aria-label="Travel cost inputs">
              <div class="panel-title">
                <h2>Trip details</h2>
                <span class="pill">‚úÖ Inputs</span>
              </div>

              <div class="grid-2">
                <div class="field">
                  <label for="tc_distance">Total trip distance</label>
                  <div class="inline-row">
                    <input id="tc_distance" class="input" type="number" inputmode="decimal" min="0" step="0.1" placeholder="e.g., 250">
                    <select id="tc_distance_unit" class="input">
                      <option value="km" selected>km</option>
                      <option value="mi">miles</option>
                    </select>
                  </div>
                  <p class="help">Used for fuel estimate and as default total distance.</p>
                </div>

                <div class="field">
                  <label for="tc_mileage">Vehicle mileage (fuel efficiency)</label>
                  <div class="inline-row">
                    <input id="tc_mileage" class="input" type="number" inputmode="decimal" min="0" step="0.1" placeholder="e.g., 16">
                    <select id="tc_mileage_unit" class="input">
                      <option value="kmpl" selected>km/L</option>
                      <option value="mpl">mi/L</option>
                      <option value="mpg">mpg (US)</option>
                    </select>
                  </div>
                  <p class="help">Higher mileage reduces fuel cost.</p>
                </div>

                <div class="field">
                  <label for="tc_fuel_price">Fuel price</label>
                  <div class="inline-row">
                    <input id="tc_fuel_price" class="input" type="number" inputmode="decimal" min="0" step="0.01" placeholder="e.g., 106.50">
                    <select id="tc_currency" class="input">
                      <option value="‚Çπ" selected>‚Çπ INR</option>
                      <option value="$">$ USD</option>
                      <option value="‚Ç¨">‚Ç¨ EUR</option>
                      <option value="¬£">¬£ GBP</option>
                    </select>
                  </div>
                  <p class="help">Per liter (or per gallon if using mpg).</p>
                </div>

                <div class="field">
                  <label for="tc_tolls">Tolls + parking (optional)</label>
                  <input id="tc_tolls" class="input" type="number" inputmode="decimal" min="0" step="1" placeholder="e.g., 450">
                  <p class="help">Add tolls/parking/other shared charges.</p>
                </div>

                <div class="field">
                  <label for="tc_other">Other costs (optional)</label>
                  <input id="tc_other" class="input" type="number" inputmode="decimal" min="0" step="1" placeholder="e.g., 200">
                  <p class="help">Snacks, permits, washing, etc.</p>
                </div>

                <div class="field">
                  <label for="tc_method">Split method</label>
                  <select id="tc_method" class="input">
                    <option value="equal" selected>Split equally (by passengers)</option>
                    <option value="distance">Split by distance (each traveler)</option>
                  </select>
                  <p class="help">Distance split is best for different drop points.</p>
                </div>

                <div class="field">
                  <label for="tc_passengers">Number of travelers</label>
                  <input id="tc_passengers" class="input" type="number" inputmode="numeric" min="1" step="1" placeholder="e.g., 4">
                  <p class="help">Used for equal split, and as default traveler count.</p>
                </div>

                <div class="field">
                  <label for="tc_round">Round per-person share</label>
                  <select id="tc_round" class="input">
                    <option value="0" selected>No rounding</option>
                    <option value="1">Nearest 1</option>
                    <option value="10">Nearest 10</option>
                    <option value="100">Nearest 100</option>
                  </select>
                  <p class="help">Helpful for cash / UPI settlements.</p>
                </div>
              </div>

              <div class="note mini" id="tc_distance_note" style="display:none"></div>

              <div class="actions">
                <button class="btn" id="tc_calc_btn" type="button">Calculate Split</button>
                <button class="btn btn-dark" id="tc_example_btn" type="button">Try Example</button>
                <button class="btn btn-ghost" id="tc_reset_btn" type="button">Reset</button>
              </div>

              <!-- Distance-based split panel -->
              <div class="note" id="tc_people_block" style="display:none">
                <div class="panel-title" style="margin:0 0 10px 0">
                  <h2 style="margin:0;font-size:1rem">Distance split: traveler distances</h2>
                  <span class="pill">üìç By distance</span>
                </div>

                <p class="mini" style="margin:0 0 10px;">
                  Enter each person‚Äôs distance traveled. Shares are proportional to distance.
                  Tip: If everyone travels full distance, just use equal split.
                </p>

                <div class="actions" style="margin-top:0">
                  <button class="btn btn-ghost" id="tc_add_person" type="button">+ Add traveler</button>
                  <button class="btn btn-ghost" id="tc_fill_equal" type="button">Fill all = total distance</button>
                </div>

                <div id="tc_people" style="margin-top:10px;display:grid;gap:10px"></div>
              </div>
            </div>

            <!-- Results -->
            <div class="panel sticky" aria-label="Travel cost results">
              <div class="panel-title">
                <h2>Results</h2>
                <span class="pill">üî• Output</span>
              </div>

              <div class="metric">
                <p class="k">Estimated fuel cost</p>
                <p class="v" id="tc_out_fuel">‚Äî</p>
                <p class="mini" id="tc_out_fuel_note">‚Äî</p>
              </div>

              <div class="metric alt">
                <p class="k">Total trip cost</p>
                <p class="v" id="tc_out_total">‚Äî</p>
                <p class="mini" id="tc_out_total_note">Fuel + tolls + other costs.</p>
              </div>

              <div class="metric">
                <p class="k">Per-person share (avg)</p>
                <p class="v" id="tc_out_each">‚Äî</p>
                <div class="bar"><span id="tc_bar"></span></div>
                <p class="mini" id="tc_out_each_note">‚Äî</p>
              </div>

              <div class="metric alt">
                <p class="k">Summary</p>
                <p class="mini" id="tc_out_summary">Enter details to see a clean summary.</p>
              </div>
            </div>

          </div>

          <h2 style="margin:18px 0 6px;">Per-person Breakdown</h2>
          <p class="mini" style="margin:0 0 10px;">If you choose distance split, each person‚Äôs share will be shown below.</p>

          <div class="table-wrap">
            <table aria-label="Travel split breakdown table">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Traveler</th>
                  <th>Distance</th>
                  <th>Share %</th>
                  <th>Pay</th>
                </tr>
              </thead>
              <tbody id="tc_table">
                <tr><td colspan="5" class="mini">Click <strong>Calculate Split</strong> to generate breakdown.</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <section style="margin-top:18px;">
        <h2>Explanation</h2>
        <p>
          This <strong>Travel Distance Cost Split Calculator</strong> helps you split a trip‚Äôs total expenses among friends or colleagues.
          It estimates <strong>fuel cost</strong> from distance, mileage and fuel price, then adds <strong>tolls</strong> and other extras.
        </p>
        <p>
          You can split the total cost in two common ways:
        </p>
        <ul>
          <li><strong>Equal split</strong> ‚Äî best when everyone travels the same route for the full journey.</li>
          <li><strong>Distance split</strong> ‚Äî fair when travelers have different pickup/drop points and ride different distances.</li>
        </ul>
        <p class="mini">
          Tip: If you want to include a driver ‚Äúconvenience fee‚Äù, add it under ‚ÄúOther costs‚Äù, then split as usual.
        </p>
      </section>

      <section>
        <h3>Formula</h3>
        <pre>Fuel used = Distance / Mileage
Fuel cost = Fuel used √ó Fuel price
Total cost = Fuel cost + Tolls + Other

Equal split: Each pays = Total cost / Travelers
Distance split: Each pays = Total cost √ó (Person distance / Sum of all distances)</pre>
      </section>

      <section class="faqs">
        <h3>FAQs</h3>
        <details class="card"><summary><strong>Split by distance?</strong></summary><p>Fairer when passengers travel different distances or join/exit at different stops.</p></details>
        <details class="card"><summary><strong>Split evenly?</strong></summary><p>Simpler when everyone travels the same route for the full trip.</p></details>
        <details class="card"><summary><strong>Include tolls?</strong></summary><p>Yes. Add tolls/parking in the inputs ‚Äî then split evenly or by distance.</p></details>
        <details class="card"><summary><strong>Round amounts?</strong></summary><p>Use rounding to simplify cash/UPI settlements (nearest 1/10/100).</p></details>
        <details class="card"><summary><strong>Multiple stops?</strong></summary><p>Use distance split and enter each traveler‚Äôs total distance across all legs.</p></details>
      </section>

      <section class="related" style="margin-top:18px;">
        <h3>Related calculators</h3>
        <div class="cards-grid related-grid">
          <a class="card" href="unit-converter.html"><h4>Unit Converter</h4><p>Convert distance, volume, temperature and more.</p></a>
          <a class="card" href="time-duration-calculator.html"><h4>Time Duration Calculator</h4><p>Add/subtract times and compute durations.</p></a>
          <a class="card" href="percentage-calculator.html"><h4>Percentage Calculator</h4><p>Calculate percentages and percent changes.</p></a>
          <a class="card" href="gst-calculator-india.html"><h4>GST Calculator (India)</h4><p>Calculate GST amount and final price.</p></a>
        </div>
      </section>

    </article>
  </main>

  <footer class="site-footer">
    <div class="wrap" style="padding:18px 0;color:#64748b;">
      <p>&copy; CalculatorSolution</p>
      <p style="margin-top:8px;font-size:0.9rem;">
        <a href="/sitemap.xml">Sitemap</a> |
        <a href="/">Home</a> |
        <a href="/privacy-policy.html">Privacy Policy</a> |
        <a href="/terms-of-service.html">Terms</a> |
        <a href="/contact.html">Contact</a> |
        <a href="/about.html">About</a>
      </p>
    </div>
  </footer>

  <script>
    (function(){
      const $ = (id)=>document.getElementById(id);

      const fmt2 = (n)=> (isFinite(n) ? new Intl.NumberFormat(undefined,{maximumFractionDigits:2}).format(n) : '‚Äî');
      const fmt0 = (n)=> (isFinite(n) ? new Intl.NumberFormat(undefined,{maximumFractionDigits:0}).format(n) : '‚Äî');
      const roundTo = (x, step)=>{
        step = parseInt(step,10)||0;
        if(!step) return x;
        return Math.round(x/step)*step;
      };

      // Inputs
      const distEl = $('tc_distance');
      const distUnitEl = $('tc_distance_unit');
      const milEl = $('tc_mileage');
      const milUnitEl = $('tc_mileage_unit');
      const fuelPriceEl = $('tc_fuel_price');
      const currencyEl = $('tc_currency');
      const tollEl = $('tc_tolls');
      const otherEl = $('tc_other');
      const methodEl = $('tc_method');
      const paxEl = $('tc_passengers');
      const roundEl = $('tc_round');

      // Blocks
      const peopleBlock = $('tc_people_block');
      const peopleWrap = $('tc_people');
      const distNote = $('tc_distance_note');

      // Outputs
      const outFuel = $('tc_out_fuel');
      const outFuelNote = $('tc_out_fuel_note');
      const outTotal = $('tc_out_total');
      const outEach = $('tc_out_each');
      const outEachNote = $('tc_out_each_note');
      const outSummary = $('tc_out_summary');
      const bar = $('tc_bar');
      const tbody = $('tc_table');

      function money(n){
        const cur = currencyEl.value || '‚Çπ';
        if(!isFinite(n)) return '‚Äî';
        return cur + ' ' + new Intl.NumberFormat(undefined,{maximumFractionDigits:0}).format(n);
      }

      function toKm(distance, unit){
        if(!isFinite(distance)) return NaN;
        return unit === 'mi' ? distance * 1.609344 : distance;
      }

      function fuelUsedLiters(distanceKm, mileage, mileageUnit){
        // mileageUnit: kmpl, mpl (mi/L), mpg (US)
        if(distanceKm<=0 || mileage<=0) return NaN;

        if(mileageUnit === 'kmpl'){
          return distanceKm / mileage; // L
        }

        if(mileageUnit === 'mpl'){
          // mi/L given, convert distance to miles first
          const miles = distanceKm / 1.609344;
          return miles / mileage;
        }

        if(mileageUnit === 'mpg'){
          // US mpg: miles per gallon. Convert to liters.
          const miles = distanceKm / 1.609344;
          const gallons = miles / mileage;
          return gallons * 3.785411784; // liters
        }

        return NaN;
      }

      function ensurePeople(count){
        const current = peopleWrap.querySelectorAll('[data-person]').length;
        for(let i=current+1; i<=count; i++){
          addPerson(i);
        }
        if(current > count){
          // remove extras
          const nodes = Array.from(peopleWrap.querySelectorAll('[data-person]'));
          nodes.slice(count).forEach(n=>n.remove());
        }
      }

      function addPerson(idx){
        const row = document.createElement('div');
        row.setAttribute('data-person','1');
        row.style.display='grid';
        row.style.gridTemplateColumns='1.2fr .8fr .6fr';
        row.style.gap='10px';
        row.innerHTML = `
          <div class="field" style="margin:0">
            <label>Traveler ${idx} name</label>
            <input class="input tc_name" type="text" placeholder="e.g., Rahul">
          </div>
          <div class="field" style="margin:0">
            <label>Distance</label>
            <input class="input tc_dist" type="number" inputmode="decimal" min="0" step="0.1" placeholder="e.g., 120">
          </div>
          <div class="field" style="margin:0">
            <label>Unit</label>
            <select class="input tc_unit">
              <option value="km" selected>km</option>
              <option value="mi">miles</option>
            </select>
          </div>
        `;
        peopleWrap.appendChild(row);

        row.querySelectorAll('input,select').forEach(el=>{
          el.addEventListener('input', ()=>{ if(distEl.value) calc(); });
          el.addEventListener('change', ()=>{ if(distEl.value) calc(); });
        });
      }

      function toggleMethodUi(){
        const method = methodEl.value;
        const pax = Math.max(1, parseInt(paxEl.value || '1', 10));

        if(method === 'distance'){
          peopleBlock.style.display = 'block';
          ensurePeople(pax);
        } else {
          peopleBlock.style.display = 'none';
        }
      }

      function calc(){
        const dist = parseFloat(distEl.value);
        const distUnit = distUnitEl.value;

        const mileage = parseFloat(milEl.value);
        const milUnit = milUnitEl.value;

        const fuelPrice = parseFloat(fuelPriceEl.value);
        const tolls = parseFloat(tollEl.value) || 0;
        const other = parseFloat(otherEl.value) || 0;

        const pax = Math.max(1, parseInt(paxEl.value || '1', 10));
        const method = methodEl.value;
        const rstep = roundEl.value;

        toggleMethodUi();

        // Validation baseline
        if(!isFinite(dist) || dist<=0){
          outFuel.textContent='‚Äî'; outFuelNote.textContent='Enter total trip distance.';
          tbody.innerHTML = '<tr><td colspan="5" class="mini">Enter inputs and click <strong>Calculate Split</strong>.</td></tr>';
          return;
        }
        if(!isFinite(mileage) || mileage<=0){
          outFuel.textContent='‚Äî'; outFuelNote.textContent='Enter valid mileage (fuel efficiency).';
          tbody.innerHTML = '<tr><td colspan="5" class="mini">Fix inputs and calculate again.</td></tr>';
          return;
        }
        if(!isFinite(fuelPrice) || fuelPrice<=0){
          outFuel.textContent='‚Äî'; outFuelNote.textContent='Enter valid fuel price.';
          tbody.innerHTML = '<tr><td colspan="5" class="mini">Fix inputs and calculate again.</td></tr>';
          return;
        }

        const distanceKm = toKm(dist, distUnit);
        const liters = fuelUsedLiters(distanceKm, mileage, milUnit);
        const fuelCost = liters * fuelPrice;
        const total = fuelCost + tolls + other;

        outFuel.textContent = money(fuelCost);
        outFuelNote.textContent = `Estimated fuel used: ${fmt2(liters)} L`;

        outTotal.textContent = money(total);

        // Breakdown
        let tableRows = [];
        let perPersonAvg = total / pax;

        if(method === 'equal'){
          const pay = roundTo(perPersonAvg, rstep);
          outEach.textContent = money(pay);
          outEachNote.textContent = `Equal split among ${pax} travelers`;
          bar.style.width = '100%';
          bar.style.background = 'linear-gradient(90deg, rgba(168,85,247,.9), rgba(59,130,246,.9))';

          for(let i=1;i<=pax;i++){
            tableRows.push(`
              <tr>
                <td>${i}</td>
                <td>Traveler ${i}</td>
                <td>‚Äî</td>
                <td>‚Äî</td>
                <td>${money(pay)}</td>
              </tr>
            `);
          }
          distNote.style.display='none';
        } else {
          // distance split
          ensurePeople(pax);

          const persons = Array.from(peopleWrap.querySelectorAll('[data-person]')).slice(0,pax).map((row, idx)=>{
            const name = (row.querySelector('.tc_name').value || `Traveler ${idx+1}`).trim();
            const d = parseFloat(row.querySelector('.tc_dist').value) || 0;
            const u = row.querySelector('.tc_unit').value;
            const dKm = toKm(d, u);
            return { name, d, u, dKm };
          });

          const sumKm = persons.reduce((s,p)=> s + (isFinite(p.dKm)?p.dKm:0), 0);

          if(sumKm <= 0){
            outEach.textContent = '‚Äî';
            outEachNote.textContent = 'Enter traveler distances to split by distance.';
            tbody.innerHTML = '<tr><td colspan="5" class="mini">Add traveler distances above (at least one non-zero) to see split.</td></tr>';
            return;
          }

          // helpful note if people distances don't match total trip
          const diffPct = Math.abs(sumKm - distanceKm) / Math.max(1e-9, distanceKm) * 100;
          distNote.style.display = 'block';
          distNote.innerHTML = `
            <strong>Distance check:</strong> Total trip distance ‚âà <strong>${fmt2(distanceKm)}</strong> km, sum of traveler distances ‚âà <strong>${fmt2(sumKm)}</strong> km.
            <span class="mini">This is okay if some people ride partial segments. If everyone rides full route, use ‚ÄúFill all = total distance‚Äù.</span>
          `;

          // shares
          let maxPay = 0;
          persons.forEach((p, i)=>{
            const share = (p.dKm / sumKm);
            const payRaw = total * share;
            const pay = roundTo(payRaw, rstep);
            maxPay = Math.max(maxPay, pay);

            tableRows.push(`
              <tr>
                <td>${i+1}</td>
                <td>${p.name}</td>
                <td>${fmt2(p.d)} ${p.u}</td>
                <td>${(share*100).toFixed(1)}%</td>
                <td>${money(pay)}</td>
              </tr>
            `);
          });

          const avgPay = total / pax;
          outEach.textContent = money(roundTo(avgPay, rstep));
          outEachNote.textContent = `Distance split across ${pax} travelers`;
          bar.style.width = '100%';
          bar.style.background = 'linear-gradient(90deg, rgba(168,85,247,.9), rgba(59,130,246,.9))';
        }

        outSummary.textContent =
          `Distance ${fmt2(dist)} ${distUnit} ‚Ä¢ Mileage ${fmt2(mileage)} ${milUnit} ‚Ä¢ Fuel ${money(fuelCost)} ‚Ä¢ Tolls ${money(tolls)} ‚Ä¢ Other ${money(other)} ‚Ä¢ Total ${money(total)} ‚Ä¢ Travelers ${pax} ‚Ä¢ Method ${method === 'equal' ? 'Equal' : 'Distance'}.`;

        tbody.innerHTML = tableRows.join('') || '<tr><td colspan="5" class="mini">No breakdown available.</td></tr>';
      }

      $('tc_calc_btn').addEventListener('click', calc);

      $('tc_example_btn').addEventListener('click', ()=>{
        distEl.value = '260';
        distUnitEl.value = 'km';
        milEl.value = '16';
        milUnitEl.value = 'kmpl';
        fuelPriceEl.value = '106.5';
        currencyEl.value = '‚Çπ';
        tollEl.value = '450';
        otherEl.value = '200';
        paxEl.value = '4';
        methodEl.value = 'distance';
        roundEl.value = '10';
        toggleMethodUi();
        // Fill distances
        ensurePeople(4);
        const rows = peopleWrap.querySelectorAll('[data-person]');
        const vals = [260, 200, 150, 80];
        ['Rahul','Amit','Neha','Priya'].forEach((nm, i)=>{
          rows[i].querySelector('.tc_name').value = nm;
          rows[i].querySelector('.tc_dist').value = vals[i];
          rows[i].querySelector('.tc_unit').value = 'km';
        });
        calc();
      });

      $('tc_reset_btn').addEventListener('click', ()=>{
        [distEl,milEl,fuelPriceEl,tollEl,otherEl,paxEl].forEach(el=>el.value='');
        distUnitEl.value='km';
        milUnitEl.value='kmpl';
        currencyEl.value='‚Çπ';
        methodEl.value='equal';
        roundEl.value='0';
        distNote.style.display='none';
        peopleWrap.innerHTML='';
        peopleBlock.style.display='none';

        outFuel.textContent='‚Äî';
        outFuelNote.textContent='‚Äî';
        outTotal.textContent='‚Äî';
        outEach.textContent='‚Äî';
        outEachNote.textContent='‚Äî';
        outSummary.textContent='Enter details to see a clean summary.';
        bar.style.width='0%';
        tbody.innerHTML = '<tr><td colspan="5" class="mini">Click <strong>Calculate Split</strong> to generate breakdown.</td></tr>';
      });

      $('tc_add_person').addEventListener('click', ()=>{
        // increase pax + add row
        const pax = Math.max(1, parseInt(paxEl.value || '1', 10)) + 1;
        paxEl.value = String(pax);
        ensurePeople(pax);
        toggleMethodUi();
      });

      $('tc_fill_equal').addEventListener('click', ()=>{
        const pax = Math.max(1, parseInt(paxEl.value || '1', 10));
        const totalDist = parseFloat(distEl.value) || 0;
        ensurePeople(pax);
        const rows = peopleWrap.querySelectorAll('[data-person]');
        for(let i=0;i<pax;i++){
          rows[i].querySelector('.tc_dist').value = totalDist;
          rows[i].querySelector('.tc_unit').value = distUnitEl.value;
        }
        calc();
      });

      // Auto-calc on change
      [distEl,distUnitEl,milEl,milUnitEl,fuelPriceEl,currencyEl,tollEl,otherEl,methodEl,paxEl,roundEl].forEach(el=>{
        el.addEventListener('input', ()=>{ if(distEl.value) calc(); });
        el.addEventListener('change', ()=>{ if(distEl.value) calc(); });
      });

      toggleMethodUi();
    })();
  </script>
</body>
</html>
