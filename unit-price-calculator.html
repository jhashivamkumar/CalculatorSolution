<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <title>Unit Price Calculator (Compare Pack Value) | CalculatorSolution</title>
  <meta name="description" content="Free Unit Price Calculator: compare products by unit price. Enter total price and quantity (weight/volume/count) to get price per unit and see the best value.">

  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://calculatorsolution.com/unit-price-calculator.html">

  <meta property="og:title" content="Unit Price Calculator">
  <meta property="og:description" content="Compare pack value by calculating price per unit (‚Çπ/kg, ‚Çπ/L, ‚Çπ/item, etc.).">
  <meta property="og:image" content="https://calculatorsolution.com/assets/og-image.svg">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://calculatorsolution.com/assets/og-image.svg">

  <link rel="icon" href="/assets/og-image.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/assets/logo.png">
  <link rel="manifest" href="/assets/site.webmanifest">

  <!-- Global CSS -->
  <link rel="preload" href="/assets/style.css" as="style" onload="this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="/assets/style.css"></noscript>

  <!-- Premium critical CSS (logic unchanged; UI/UX + responsiveness improved) -->
  <style>
    html,body{height:100%;margin:0}
    body{
      font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial;
      background:
        radial-gradient(1200px 700px at 10% 10%, rgba(59,130,246,.14), transparent 60%),
        radial-gradient(900px 600px at 90% 20%, rgba(168,85,247,.14), transparent 55%),
        linear-gradient(135deg,#f8fafc,#f1f5f9);
      color:#0f172a; line-height:1.6; min-height:100vh;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    *{box-sizing:border-box}
    img{max-width:100%;height:auto}
    a{color:inherit}
    :focus-visible{outline:3px solid rgba(59,130,246,.45);outline-offset:2px;border-radius:10px}

    .wrap{max-width:1100px;margin:0 auto;padding:0 18px}

    .site-header{
      padding:14px 0;border-bottom:1px solid #e2e8f0;
      background:rgba(255,255,255,.65);backdrop-filter:blur(10px);
      position:sticky;top:0;z-index:10
    }
    .brand{display:flex;align-items:center;gap:10px;text-decoration:none;min-width:0}
    .brand-text{font-weight:900;color:#2563eb;font-size:1.15rem;white-space:nowrap}
    .brand-logo{border-radius:10px;flex:0 0 auto}

    .hero{
      margin:18px 0 14px 0;border-radius:18px;padding:26px 18px;
      color:#fff;background:linear-gradient(135deg,#2563eb,#a855f7);
      box-shadow:0 18px 50px rgba(2,6,23,.15);
      position:relative;overflow:hidden;
    }
    .hero:before{
      content:""; position:absolute; inset:-60px -60px auto auto;
      width:240px;height:240px;border-radius:999px;
      background:rgba(255,255,255,.16);
      transform:rotate(10deg);
      pointer-events:none;
    }
    .hero h1{margin:0 0 6px 0;font-size:clamp(1.35rem, 2.2vw, 1.85rem);letter-spacing:-.02em}
    .hero p{margin:0;opacity:.95;max-width:70ch}
    .chips{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .chip{
      display:inline-flex;align-items:center;gap:8px;
      padding:7px 10px;border-radius:999px;
      background:rgba(255,255,255,.14);
      border:1px solid rgba(255,255,255,.18);
      font-weight:800;font-size:.88rem;
    }

    .calc-shell{
      display:grid;grid-template-columns:1.1fr .9fr;gap:14px;
      align-items:start;margin-top:14px
    }
    .panel{
      background:rgba(255,255,255,.92);
      border:1px solid #e2e8f0;border-radius:16px;
      box-shadow:0 14px 40px rgba(8,13,26,.06);
      padding:14px;
    }
    .panel-title{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:10px}
    .panel-title h2{margin:0;font-size:1.05rem}
    .pill{display:inline-flex;gap:8px;align-items:center;padding:6px 10px;border-radius:999px;background:rgba(37,99,235,.10);color:#1d4ed8;font-weight:900;font-size:.85rem;white-space:nowrap}

    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .field{display:flex;flex-direction:column;gap:6px;min-width:0}
    .field label{font-weight:900;font-size:.92rem}
    .input{
      padding:10px 12px;border:1px solid #e2e8f0;border-radius:12px;
      font-size:1rem;background:#fff;outline:none;
      width:100%;
      min-height:44px; /* touch target */
    }
    select.input{appearance:none;background-image:
      linear-gradient(45deg, transparent 50%, #64748b 50%),
      linear-gradient(135deg, #64748b 50%, transparent 50%);
      background-position:calc(100% - 18px) 50%, calc(100% - 12px) 50%;
      background-size:6px 6px, 6px 6px;
      background-repeat:no-repeat;
      padding-right:38px;
    }
    .input:focus{border-color:#93c5fd;box-shadow:0 0 0 4px rgba(59,130,246,.12)}
    .help{margin:0;font-size:.86rem;color:#64748b}

    .actions{
      display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;
      align-items:stretch;
    }
    .btn{
      display:inline-flex;align-items:center;justify-content:center;
      padding:10px 14px;border-radius:12px;
      font-weight:900;border:0;cursor:pointer;
      background:linear-gradient(90deg,#2563eb,#60a5fa);
      color:#fff; box-shadow:0 12px 26px rgba(37,99,235,.18);
      transition:transform .2s, box-shadow .2s;
      min-height:44px; /* touch target */
    }
    .btn:hover{transform:translateY(-2px);box-shadow:0 16px 34px rgba(37,99,235,.22)}
    .btn:active{transform:translateY(0)}
    .btn-ghost{background:#fff;color:#0f172a;border:1px solid #e2e8f0;box-shadow:none}
    .btn-dark{background:#0f172a;box-shadow:0 14px 30px rgba(2,6,23,.18)}
    .btn:disabled{opacity:.6;cursor:not-allowed;transform:none}

    .sticky{position:sticky;top:82px}
    .metric{
      border:1px solid #e2e8f0;border-radius:16px;padding:12px;
      background:linear-gradient(180deg, rgba(37,99,235,.10), rgba(255,255,255,.92));
      margin-bottom:10px;
    }
    .metric.alt{
      background:linear-gradient(180deg, rgba(168,85,247,.10), rgba(255,255,255,.92));
    }
    .metric .k{margin:0;color:#475569;font-size:.86rem;font-weight:800}
    .metric .v{margin:4px 0 0;font-size:clamp(1.25rem, 2.2vw, 1.55rem);font-weight:1000;letter-spacing:-.02em;word-break:break-word}
    .mini{font-size:.86rem;color:#64748b}

    .bar{
      height:10px;border-radius:999px;background:#e2e8f0;overflow:hidden;margin-top:10px
    }
    .bar > span{display:block;height:100%;width:0%}

    .table-wrap{
      overflow:auto;
      border:1px solid #e2e8f0;border-radius:16px;background:#fff;
      box-shadow:0 12px 26px rgba(8,13,26,.05);
      -webkit-overflow-scrolling:touch;
    }
    table{width:100%;border-collapse:collapse;min-width:860px}
    th,td{padding:10px 12px;border-bottom:1px solid #e2e8f0;text-align:left;font-size:.95rem;vertical-align:top}
    th{background:#f8fafc;font-weight:1000;position:sticky;top:0;z-index:1}
    tr:last-child td{border-bottom:0}

    .note{
      border:1px dashed #cbd5e1;border-radius:14px;padding:12px;background:rgba(255,255,255,.7);
      margin-top:10px
    }

    .card{background:#fff;border:1px solid #e2e8f0;border-radius:14px;box-shadow:0 10px 24px rgba(8,13,26,.05);padding:12px}
    details.card{padding:0}
    details.card summary{
      cursor:pointer;padding:12px;
      list-style:none;
    }
    details.card summary::-webkit-details-marker{display:none}
    details.card summary:after{
      content:"‚ñæ"; float:right; color:#475569; font-weight:900;
    }
    details[open].card summary:after{content:"‚ñ¥"}
    details.card p{padding:0 12px 12px;margin:0;color:#334155}

    pre{
      background:rgba(255,255,255,.85);
      border:1px solid #e2e8f0;border-radius:12px;
      padding:12px;overflow:auto;line-height:1.5;
    }

    /* Related grid fallback if global CSS is missing */
    .cards-grid{
      display:grid;
      grid-template-columns:repeat(4,1fr);
      gap:12px;
    }
    .cards-grid .card h4{margin:0 0 6px}
    .cards-grid .card p{margin:0;color:#475569}
    .cards-grid .card:hover{transform:translateY(-2px);transition:transform .15s}

    /* Section spacing */
    section{margin-top:16px}
    .faqs details + details{margin-top:10px}

    /* ‚úÖ Responsive breakpoints (NO logic changes) */
    @media (max-width: 1024px){
      .wrap{padding:0 16px}
      table{min-width:820px}
    }

    @media (max-width: 920px){
      .calc-shell{grid-template-columns:1fr}
      .sticky{position:static}
      table{min-width:720px}
      .cards-grid{grid-template-columns:repeat(2,1fr)}
    }

    @media (max-width: 640px){
      .hero{padding:18px 14px;border-radius:16px}
      .grid-2{grid-template-columns:1fr}
      .actions{flex-direction:column}
      .btn{width:100%}
      .pill{display:none} /* reduces header clutter on small screens */
      table{min-width:640px}
      th,td{padding:10px}
    }

    @media (max-width: 420px){
      .wrap{padding:0 12px}
      .brand-text{font-size:1.05rem}
      table{min-width:560px}
    }

    /* Reduce motion */
    @media (prefers-reduced-motion: reduce){
      *{scroll-behavior:auto !important}
      .btn,.card{transition:none !important}
      .btn:hover,.card:hover{transform:none !important}
    }
  </style>

  <!-- GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-Y5YHCPQPFS"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments)}
    gtag('js', new Date());
    gtag('config', 'G-Y5YHCPQPFS');
  </script>

  <!-- Schema: WebPage + Breadcrumb + HowTo + FAQ -->
  <script type="application/ld+json">[
    {
      "@context":"https://schema.org",
      "@type":"WebPage",
      "name":"Unit Price Calculator",
      "url":"https://calculatorsolution.com/unit-price-calculator.html",
      "description":"Calculate price per unit (‚Çπ/kg, ‚Çπ/L, ‚Çπ/item) to compare product value."
    },
    {
      "@context":"https://schema.org",
      "@type":"BreadcrumbList",
      "itemListElement":[
        {"@type":"ListItem","position":1,"name":"CalculatorSolution","item":"https://calculatorsolution.com/"},
        {"@type":"ListItem","position":2,"name":"Unit Price Calculator","item":"https://calculatorsolution.com/unit-price-calculator.html"}
      ]
    },
    {
      "@context":"https://schema.org",
      "@type":"HowTo",
      "name":"How to calculate unit price",
      "step":[
        {"@type":"HowToStep","name":"Enter price and quantity","text":"Type the product price and the pack quantity (weight, volume or count)."},
        {"@type":"HowToStep","name":"Choose the unit","text":"Pick units like g/kg, ml/L, or count to standardize comparisons."},
        {"@type":"HowToStep","name":"Compare products","text":"Use the computed price per base unit to decide which pack offers better value."}
      ]
    },
    {
      "@context":"https://schema.org",
      "@type":"FAQPage",
      "mainEntity":[
        {"@type":"Question","name":"Different units?","acceptedAnswer":{"@type":"Answer","text":"Convert units to a common base (e.g., g to kg, ml to L) before comparing."}},
        {"@type":"Question","name":"Includes tax?","acceptedAnswer":{"@type":"Answer","text":"Include tax if that‚Äôs what you pay at checkout. Compare like-for-like totals."}},
        {"@type":"Question","name":"Per weight or count?","acceptedAnswer":{"@type":"Answer","text":"Use weight/volume for commodities and count for items. Keep the base unit consistent."}},
        {"@type":"Question","name":"Promotional packs?","acceptedAnswer":{"@type":"Answer","text":"Check net quantity and effective price. Some deals change the unit price significantly."}},
        {"@type":"Question","name":"Round?","acceptedAnswer":{"@type":"Answer","text":"Rounding helps decisions. Keep extra decimals if you need precise comparisons."}}
      ]
    }
  ]</script>
</head>

<body>
  <header class="site-header">
    <div class="wrap">
      <a class="brand" href="/">
        <img src="/assets/logo.png" alt="CalculatorSolution logo" class="brand-logo" width="36" height="36">
        <span class="brand-text">CalculatorSolution</span>
      </a>
    </div>
  </header>

  <main class="wrap">
    <article>
      <div class="hero">
        <h1>Unit Price Calculator</h1>
        <p>Calculate price per unit (‚Çπ/kg, ‚Çπ/L, ‚Çπ/item) and compare which pack gives the best value.</p>
        <div class="chips">
          <span class="chip">üßæ Per-unit cost</span>
          <span class="chip">‚öñÔ∏è Auto unit conversion</span>
          <span class="chip">üèÜ Best value finder</span>
        </div>
      </div>

      <section>
        <div id="premium-unit-price">
          <div class="calc-shell">

            <!-- Inputs -->
            <div class="panel" aria-label="Unit price inputs">
              <div class="panel-title">
                <h2>Product details</h2>
                <span class="pill">‚úÖ Inputs</span>
              </div>

              <div class="grid-2">
                <div class="field">
                  <label for="up_price">Total price</label>
                  <input id="up_price" class="input" type="number" inputmode="decimal" min="0" step="0.01" placeholder="e.g., 199">
                  <p class="help">Enter final price you pay (include tax if comparing checkout totals).</p>
                </div>

                <div class="field">
                  <label for="up_qty">Quantity</label>
                  <input id="up_qty" class="input" type="number" inputmode="decimal" min="0" step="0.01" placeholder="e.g., 500">
                  <p class="help">Pack size (e.g., 500 g, 1.5 L, 12 items).</p>
                </div>

                <div class="field">
                  <label for="up_unit">Unit</label>
                  <select id="up_unit" class="input">
                    <optgroup label="Weight">
                      <option value="g" selected>grams (g)</option>
                      <option value="kg">kilograms (kg)</option>
                    </optgroup>
                    <optgroup label="Volume">
                      <option value="ml">milliliters (ml)</option>
                      <option value="l">liters (L)</option>
                    </optgroup>
                    <optgroup label="Count">
                      <option value="count">items (count)</option>
                    </optgroup>
                  </select>
                  <p class="help">We convert to a base unit (kg / L / item) for comparison.</p>
                </div>

                <div class="field">
                  <label for="up_compare_price">Compare with another product? (optional)</label>
                  <input id="up_compare_price" class="input" type="number" inputmode="decimal" min="0" step="0.01" placeholder="e.g., 349">
                  <p class="help">Add a second product price to compare value.</p>
                </div>

                <div class="field">
                  <label for="up_compare_qty">Second product quantity (optional)</label>
                  <input id="up_compare_qty" class="input" type="number" inputmode="decimal" min="0" step="0.01" placeholder="e.g., 1">
                  <p class="help">Quantity for second product (use same unit type).</p>
                </div>

                <div class="field">
                  <label for="up_round">Round result</label>
                  <select id="up_round" class="input">
                    <option value="2" selected>2 decimals</option>
                    <option value="3">3 decimals</option>
                    <option value="0">No decimals</option>
                  </select>
                  <p class="help">Rounding for quick decisions.</p>
                </div>
              </div>

              <div class="actions">
                <button class="btn" id="up_calc_btn" type="button">Calculate</button>
                <button class="btn btn-dark" id="up_example_btn" type="button">Try Example</button>
                <button class="btn btn-ghost" id="up_reset_btn" type="button">Reset</button>
              </div>

              <div class="note mini">
                Formula: <strong>Unit price = Total price √∑ Total units</strong>.
                For weight/volume, we standardize to <strong>‚Çπ/kg</strong> or <strong>‚Çπ/L</strong>. For count, we show <strong>‚Çπ/item</strong>.
              </div>
            </div>

            <!-- Results -->
            <div class="panel sticky" aria-label="Unit price results">
              <div class="panel-title">
                <h2>Results</h2>
                <span class="pill">üî• Output</span>
              </div>

              <div class="metric">
                <p class="k">Unit price (Product A)</p>
                <p class="v" id="up_out_a">‚Äî</p>
                <p class="mini" id="up_out_a_note">‚Äî</p>
              </div>

              <div class="metric alt">
                <p class="k">Unit price (Product B)</p>
                <p class="v" id="up_out_b">‚Äî</p>
                <p class="mini" id="up_out_b_note">Optional comparison.</p>
              </div>

              <div class="metric">
                <p class="k">Best value</p>
                <p class="v" id="up_out_best">‚Äî</p>
                <div class="bar"><span id="up_bar"></span></div>
                <p class="mini" id="up_out_best_note">‚Äî</p>
              </div>

              <div class="metric alt">
                <p class="k">Summary</p>
                <p class="mini" id="up_out_summary">Enter details to see a clean summary.</p>
              </div>
            </div>

          </div>

          <h2 style="margin:18px 0 6px;">Comparison Table</h2>
          <p class="mini" style="margin:0 0 10px;">If you enter Product B, we‚Äôll compare unit prices side-by-side.</p>

          <div class="table-wrap">
            <table aria-label="Unit price comparison table">
              <thead>
                <tr>
                  <th>Product</th>
                  <th>Total Price</th>
                  <th>Quantity</th>
                  <th>Converted Base Quantity</th>
                  <th>Unit Price</th>
                </tr>
              </thead>
              <tbody id="up_table">
                <tr><td colspan="5" class="mini">Click <strong>Calculate</strong> to generate the comparison.</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <section style="margin-top:18px;">
        <h2>Explanation</h2>
        <p>
          A <strong>Unit Price Calculator</strong> helps you compare products fairly by converting them to the same base unit.
          For example, you can compare a 500 g pack vs a 1 kg pack by using <strong>‚Çπ per kg</strong>, or compare 750 ml vs 1 L using <strong>‚Çπ per liter</strong>.
        </p>
        <p class="mini">
          Tip: Always compare the final price you actually pay (including tax/fees if applicable). For promotional packs, confirm the <em>net quantity</em>.
        </p>
      </section>

      <section>
        <h3>Formula</h3>
        <pre>Unit price = total price / total units</pre>
      </section>

      <section class="faqs">
        <h3>FAQs</h3>
        <details class="card"><summary><strong>Different units?</strong></summary><p>Convert units to a common base (g‚Üíkg, ml‚ÜíL) before comparing.</p></details>
        <details class="card"><summary><strong>Includes tax?</strong></summary><p>Include tax if it‚Äôs included in what you pay at checkout.</p></details>
        <details class="card"><summary><strong>Per weight or count?</strong></summary><p>Use weight/volume for commodities and count for items. Standardize one base unit.</p></details>
        <details class="card"><summary><strong>Promotional packs?</strong></summary><p>Look at net quantity and effective price after discounts.</p></details>
        <details class="card"><summary><strong>Round?</strong></summary><p>Round for quick decisions; keep more decimals for close comparisons.</p></details>
      </section>

      <section class="related" style="margin-top:18px;">
        <h3>Related calculators</h3>
        <div class="cards-grid related-grid">
          <a class="card" href="discount-calculator.html"><h4>Discount Calculator</h4><p>Compute final price after discount.</p></a>
          <a class="card" href="gst-calculator-india.html"><h4>GST Calculator (India)</h4><p>Calculate GST amount and final price.</p></a>
          <a class="card" href="percentage-calculator.html"><h4>Percentage Calculator</h4><p>Compute percentages quickly.</p></a>
          <a class="card" href="percentage-change-calculator.html"><h4>Percentage Change Calculator</h4><p>Find percent increase/decrease.</p></a>
        </div>
      </section>

    </article>
  </main>

  <footer class="site-footer">
    <div class="wrap">
      <p>&copy; CalculatorSolution</p>
      <p style="margin-top:8px;font-size:0.9rem;">
        <a href="/sitemap.xml">Sitemap</a> |
        <a href="/">Home</a> |
        <a href="/">Home</a> |
        <a href="/privacy-policy.html">Privacy Policy</a> |
        <a href="/terms-of-service.html">Terms</a> |
        <a href="/contact.html">Contact</a> |
        <a href="/about.html">About</a>
      </p>
    </div>
  </footer>

  <script>
    (function(){
      const $ = (id)=>document.getElementById(id);

      const priceEl = $('up_price');
      const qtyEl   = $('up_qty');
      const unitEl  = $('up_unit');

      const priceBEl = $('up_compare_price');
      const qtyBEl   = $('up_compare_qty');

      const roundEl = $('up_round');

      const outA = $('up_out_a');
      const outANote = $('up_out_a_note');
      const outB = $('up_out_b');
      const outBNote = $('up_out_b_note');

      const outBest = $('up_out_best');
      const outBestNote = $('up_out_best_note');
      const outSummary = $('up_out_summary');
      const bar = $('up_bar');

      const tbody = $('up_table');

      function roundTo(n, decimals){
        decimals = parseInt(decimals,10);
        if(!isFinite(n)) return NaN;
        if(!isFinite(decimals)) decimals = 2;
        const p = Math.pow(10, decimals);
        return Math.round(n*p)/p;
      }

      function unitLabelBase(unit){
        if(unit === 'g' || unit === 'kg') return 'kg';
        if(unit === 'ml' || unit === 'l') return 'L';
        return 'item';
      }

      function convertToBaseQty(qty, unit){
        // base: kg for weight, L for volume, item for count
        if(unit === 'g') return qty / 1000;  // kg
        if(unit === 'kg') return qty;
        if(unit === 'ml') return qty / 1000; // L
        if(unit === 'l') return qty;
        if(unit === 'count') return qty;
        return qty;
      }

      function fmtMoney(n){
        if(!isFinite(n)) return '‚Äî';
        return '‚Çπ ' + new Intl.NumberFormat(undefined,{maximumFractionDigits:2}).format(n);
      }
      function fmtQty(n){
        if(!isFinite(n)) return '‚Äî';
        return new Intl.NumberFormat(undefined,{maximumFractionDigits:3}).format(n);
      }

      function calc(){
        const price = parseFloat(priceEl.value);
        const qty   = parseFloat(qtyEl.value);
        const unit  = unitEl.value;
        const decimals = roundEl.value;

        if(!isFinite(price) || price<=0){
          outA.textContent='‚Äî'; outANote.textContent='Enter valid total price.';
          tbody.innerHTML = '<tr><td colspan="5" class="mini">Enter valid inputs and click <strong>Calculate</strong>.</td></tr>';
          return;
        }
        if(!isFinite(qty) || qty<=0){
          outA.textContent='‚Äî'; outANote.textContent='Enter valid quantity.';
          tbody.innerHTML = '<tr><td colspan="5" class="mini">Enter valid inputs and click <strong>Calculate</strong>.</td></tr>';
          return;
        }

        const baseUnit = unitLabelBase(unit);
        const baseQty = convertToBaseQty(qty, unit);

        if(!isFinite(baseQty) || baseQty<=0){
          outA.textContent='‚Äî'; outANote.textContent='Quantity conversion failed.';
          tbody.innerHTML = '<tr><td colspan="5" class="mini">Fix inputs and calculate again.</td></tr>';
          return;
        }

        const unitPriceA = price / baseQty;
        const unitPriceA2 = roundTo(unitPriceA, decimals);

        outA.textContent = `${fmtMoney(unitPriceA2)} / ${baseUnit}`;
        outANote.textContent = `Based on ${fmtQty(baseQty)} ${baseUnit} total.`;

        // Optional B
        const priceB = parseFloat(priceBEl.value);
        const qtyB   = parseFloat(qtyBEl.value);

        let unitPriceB2 = NaN, baseQtyB = NaN;

        if(isFinite(priceB) && priceB>0 && isFinite(qtyB) && qtyB>0){
          baseQtyB = convertToBaseQty(qtyB, unit);
          const unitPriceB = priceB / baseQtyB;
          unitPriceB2 = roundTo(unitPriceB, decimals);

          outB.textContent = `${fmtMoney(unitPriceB2)} / ${baseUnit}`;
          outBNote.textContent = `Based on ${fmtQty(baseQtyB)} ${baseUnit} total.`;
        } else {
          outB.textContent = '‚Äî';
          outBNote.textContent = 'Enter Product B price + quantity to compare.';
        }

        // Best value + bar
        if(isFinite(unitPriceB2)){
          const cheaper = (unitPriceA2 < unitPriceB2) ? 'Product A' : (unitPriceB2 < unitPriceA2 ? 'Product B' : 'Tie');
          outBest.textContent = cheaper;

          const diff = Math.abs(unitPriceA2 - unitPriceB2);
          const pct = (Math.min(unitPriceA2, unitPriceB2) / Math.max(unitPriceA2, unitPriceB2)) * 100;
          bar.style.width = isFinite(pct) ? Math.max(0, Math.min(100, pct)).toFixed(1) + '%' : '0%';
          bar.style.background = 'linear-gradient(90deg, rgba(168,85,247,.9), rgba(59,130,246,.9))';

          if(cheaper === 'Tie'){
            outBestNote.textContent = `Both have the same unit price.`;
          } else {
            outBestNote.textContent = `${cheaper} is cheaper by ${fmtMoney(diff)} per ${baseUnit}.`;
          }
        } else {
          outBest.textContent = '‚Äî';
          outBestNote.textContent = 'Add Product B for best-value comparison.';
          bar.style.width = '0%';
        }

        outSummary.textContent =
          `A: ‚Çπ${fmtQty(price)} for ${fmtQty(qty)} ${unit} ‚Üí ${fmtMoney(unitPriceA2)}/${baseUnit}` +
          (isFinite(unitPriceB2) ? ` ‚Ä¢ B: ‚Çπ${fmtQty(priceB)} for ${fmtQty(qtyB)} ${unit} ‚Üí ${fmtMoney(unitPriceB2)}/${baseUnit}` : '');

        // Table
        const rows = [];
        rows.push(`
          <tr>
            <td><strong>A</strong></td>
            <td>‚Çπ ${fmtQty(price)}</td>
            <td>${fmtQty(qty)} ${unit}</td>
            <td>${fmtQty(baseQty)} ${baseUnit}</td>
            <td><strong>${fmtMoney(unitPriceA2)}</strong> / ${baseUnit}</td>
          </tr>
        `);

        if(isFinite(unitPriceB2)){
          rows.push(`
            <tr>
              <td><strong>B</strong></td>
              <td>‚Çπ ${fmtQty(priceB)}</td>
              <td>${fmtQty(qtyB)} ${unit}</td>
              <td>${fmtQty(baseQtyB)} ${baseUnit}</td>
              <td><strong>${fmtMoney(unitPriceB2)}</strong> / ${baseUnit}</td>
            </tr>
          `);
        } else {
          rows.push(`<tr><td colspan="5" class="mini">Product B not entered (optional).</td></tr>`);
        }

        tbody.innerHTML = rows.join('');
      }

      $('up_calc_btn').addEventListener('click', calc);

      $('up_example_btn').addEventListener('click', ()=>{
        // Example: compare 500 g vs 1 kg
        priceEl.value = '199';
        qtyEl.value = '500';
        unitEl.value = 'g';
        priceBEl.value = '349';
        qtyBEl.value = '1000';
        roundEl.value = '2';
        calc();
      });

      $('up_reset_btn').addEventListener('click', ()=>{
        [priceEl,qtyEl,priceBEl,qtyBEl].forEach(el=>el.value='');
        unitEl.value='g';
        roundEl.value='2';
        outA.textContent='‚Äî';
        outANote.textContent='‚Äî';
        outB.textContent='‚Äî';
        outBNote.textContent='Optional comparison.';
        outBest.textContent='‚Äî';
        outBestNote.textContent='‚Äî';
        outSummary.textContent='Enter details to see a clean summary.';
        bar.style.width='0%';
        tbody.innerHTML = '<tr><td colspan="5" class="mini">Click <strong>Calculate</strong> to generate the comparison.</td></tr>';
      });

      [priceEl,qtyEl,unitEl,priceBEl,qtyBEl,roundEl].forEach(el=>{
        el.addEventListener('input', ()=>{ if(priceEl.value && qtyEl.value) calc(); });
        el.addEventListener('change', ()=>{ if(priceEl.value && qtyEl.value) calc(); });
      });
    })();
  </script>
</body>
</html>
